{"version":3,"file":"nuxt-legacy.js","sources":["../lib/common/utils.js","../lib/core/module.js","../lib/common/modes.js","../lib/common/nuxt.config.js","../lib/common/options.js","../lib/core/meta.js","../lib/core/middleware/error.js","../lib/core/middleware/nuxt.js","../lib/core/renderer.js","../lib/core/nuxt.js","../lib/core/index.js","../lib/builder/webpack/utils/perf-loader.js","../lib/builder/webpack/plugins/vue/util.js","../lib/builder/webpack/plugins/vue/client.js","../lib/builder/webpack/utils/postcss.js","../lib/builder/webpack/utils/style-loader.js","../lib/builder/webpack/plugins/warnfix.js","../lib/builder/webpack/plugins/stats.js","../lib/builder/webpack/base.js","../lib/builder/webpack/client.js","../lib/builder/webpack/plugins/vue/server.js","../lib/builder/webpack/server.js","../lib/builder/builder.js","../lib/builder/generator.js","../lib/builder/index.js","../lib/nuxt-legacy.js"],"sourcesContent":["import path from 'path'\nimport _ from 'lodash'\n\nexport const encodeHtml = function encodeHtml(str) {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n}\n\nexport const getContext = function getContext(req, res) {\n  return { req, res }\n}\n\nexport const waitFor = function waitFor(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms || 0))\n}\n\nasync function promiseFinally(fn, finalFn) {\n  let result\n  try {\n    if (typeof fn === 'function') {\n      result = await fn()\n    } else {\n      result = await fn\n    }\n  } finally {\n    finalFn()\n  }\n  return result\n}\n\nexport const timeout = function timeout(fn, ms, msg) {\n  let timerId\n  const warpPromise = promiseFinally(fn, () => clearTimeout(timerId))\n  const timerPromise = new Promise((resolve, reject) => {\n    timerId = setTimeout(() => reject(new Error(msg)), ms)\n  })\n  return Promise.race([warpPromise, timerPromise])\n}\n\nexport const urlJoin = function urlJoin() {\n  return [].slice\n    .call(arguments)\n    .join('/')\n    .replace(/\\/+/g, '/')\n    .replace(':/', '://')\n}\n\nexport const isUrl = function isUrl(url) {\n  return url.indexOf('http') === 0 || url.indexOf('//') === 0\n}\n\nexport const promisifyRoute = function promisifyRoute(fn, ...args) {\n  // If routes is an array\n  if (Array.isArray(fn)) {\n    return Promise.resolve(fn)\n  }\n  // If routes is a function expecting a callback\n  if (fn.length === arguments.length) {\n    return new Promise((resolve, reject) => {\n      fn((err, routeParams) => {\n        if (err) {\n          reject(err)\n        }\n        resolve(routeParams)\n      }, ...args)\n    })\n  }\n  let promise = fn(...args)\n  if (\n    !promise ||\n    (!(promise instanceof Promise) && typeof promise.then !== 'function')\n  ) {\n    promise = Promise.resolve(promise)\n  }\n  return promise\n}\n\nexport const sequence = function sequence(tasks, fn) {\n  return tasks.reduce(\n    (promise, task) => promise.then(() => fn(task)),\n    Promise.resolve()\n  )\n}\n\nexport const parallel = function parallel(tasks, fn) {\n  return Promise.all(tasks.map(task => fn(task)))\n}\n\nexport const chainFn = function chainFn(base, fn) {\n  /* istanbul ignore if */\n  if (typeof fn !== 'function') {\n    return base\n  }\n  return function () {\n    if (typeof base !== 'function') {\n      return fn.apply(this, arguments)\n    }\n    let baseResult = base.apply(this, arguments)\n    // Allow function to mutate the first argument instead of returning the result\n    if (baseResult === undefined) {\n      baseResult = arguments[0]\n    }\n    let fnResult = fn.call(\n      this,\n      baseResult,\n      ...Array.prototype.slice.call(arguments, 1)\n    )\n    // Return mutated argument if no result was returned\n    if (fnResult === undefined) {\n      return baseResult\n    }\n    return fnResult\n  }\n}\n\nexport const isPureObject = function isPureObject(o) {\n  return !Array.isArray(o) && typeof o === 'object'\n}\n\nexport const isWindows = /^win/.test(process.platform)\n\nexport const wp = function wp(p = '') {\n  /* istanbul ignore if */\n  if (isWindows) {\n    return p.replace(/\\\\/g, '\\\\\\\\')\n  }\n  return p\n}\n\nexport const wChunk = function wChunk(p = '') {\n  /* istanbul ignore if */\n  if (isWindows) {\n    return p.replace(/\\//g, '_')\n  }\n  return p\n}\n\nconst reqSep = /\\//g\nconst sysSep = _.escapeRegExp(path.sep)\nconst normalize = string => string.replace(reqSep, sysSep)\n\nexport const r = function r() {\n  let args = Array.prototype.slice.apply(arguments)\n  let lastArg = _.last(args)\n\n  if (lastArg.indexOf('@') === 0 || lastArg.indexOf('~') === 0) {\n    return wp(lastArg)\n  }\n\n  return wp(path.resolve(...args.map(normalize)))\n}\n\nexport const relativeTo = function relativeTo() {\n  let args = Array.prototype.slice.apply(arguments)\n  let dir = args.shift()\n\n  // Keep webpack inline loader intact\n  if (args[0].indexOf('!') !== -1) {\n    const loaders = args.shift().split('!')\n\n    return loaders.concat(relativeTo(dir, loaders.pop(), ...args)).join('!')\n  }\n\n  // Resolve path\n  let _path = r(...args)\n\n  // Check if path is an alias\n  if (_path.indexOf('@') === 0 || _path.indexOf('~') === 0) {\n    return _path\n  }\n\n  // Make correct relative path\n  let rp = path.relative(dir, _path)\n  if (rp[0] !== '.') {\n    rp = './' + rp\n  }\n\n  return wp(rp)\n}\n\nexport const flatRoutes = function flatRoutes(router, _path = '', routes = []) {\n  router.forEach(r => {\n    if (!r.path.includes(':') && !r.path.includes('*')) {\n      /* istanbul ignore if */\n      if (r.children) {\n        if (_path === '' && r.path === '/') {\n          routes.push('/')\n        }\n        flatRoutes(r.children, _path + r.path + '/', routes)\n      } else {\n        _path = _path.replace(/^\\/+$/, '/')\n        routes.push(\n          (r.path === '' && _path[_path.length - 1] === '/'\n            ? _path.slice(0, -1)\n            : _path) + r.path\n        )\n      }\n    }\n  })\n  return routes\n}\n\nfunction cleanChildrenRoutes(routes, isChild = false) {\n  let start = -1\n  let routesIndex = []\n  routes.forEach(route => {\n    if (/-index$/.test(route.name) || route.name === 'index') {\n      // Save indexOf 'index' key in name\n      let res = route.name.split('-')\n      let s = res.indexOf('index')\n      start = start === -1 || s < start ? s : start\n      routesIndex.push(res)\n    }\n  })\n  routes.forEach(route => {\n    route.path = isChild ? route.path.replace('/', '') : route.path\n    if (route.path.indexOf('?') > -1) {\n      let names = route.name.split('-')\n      let paths = route.path.split('/')\n      if (!isChild) {\n        paths.shift()\n      } // clean first / for parents\n      routesIndex.forEach(r => {\n        let i = r.indexOf('index') - start //  children names\n        if (i < paths.length) {\n          for (let a = 0; a <= i; a++) {\n            if (a === i) {\n              paths[a] = paths[a].replace('?', '')\n            }\n            if (a < i && names[a] !== r[a]) {\n              break\n            }\n          }\n        }\n      })\n      route.path = (isChild ? '' : '/') + paths.join('/')\n    }\n    route.name = route.name.replace(/-index$/, '')\n    if (route.children) {\n      if (route.children.find(child => child.path === '')) {\n        delete route.name\n      }\n      route.children = cleanChildrenRoutes(route.children, true)\n    }\n  })\n  return routes\n}\n\nexport const createRoutes = function createRoutes(files, srcDir, pagesDir) {\n  let routes = []\n  files.forEach(file => {\n    let keys = file\n      .replace(RegExp(`^${pagesDir}`), '')\n      .replace(/\\.(vue|js)$/, '')\n      .replace(/\\/{2,}/g, '/')\n      .split('/')\n      .slice(1)\n    let route = { name: '', path: '', component: r(srcDir, file) }\n    let parent = routes\n    keys.forEach((key, i) => {\n      // remove underscore only, if its the prefix\n      const sanatizedKey = key.indexOf('_') === 0\n        ? key.replace('_', '')\n        : key\n      route.name = route.name\n        ? route.name + '-' + sanatizedKey\n        : sanatizedKey\n      route.name += key === '_' ? 'all' : ''\n      route.chunkName = file.replace(/\\.(vue|js)$/, '')\n      let child = _.find(parent, { name: route.name })\n      if (child) {\n        child.children = child.children || []\n        parent = child.children\n        route.path = ''\n      } else {\n        if (key === 'index' && i + 1 === keys.length) {\n          route.path += i > 0 ? '' : '/'\n        } else {\n          route.path += '/' +\n            (key === '_'\n              ? '*'\n              : key.indexOf('_') === 0\n                ? key.replace('_', ':')\n                : key)\n          if (key !== '_' && key.indexOf('_') === 0) {\n            route.path += '?'\n          }\n        }\n      }\n    })\n    // Order Routes path\n    parent.push(route)\n    parent.sort((a, b) => {\n      if (!a.path.length) {\n        return -1\n      }\n      if (!b.path.length) {\n        return 1\n      }\n      // Order: /static, /index, /:dynamic\n      // Match exact route before index: /login before /index/_slug\n      if (a.path === '/') {\n        return /^\\/(:|\\*)/.test(b.path) ? -1 : 1\n      }\n      if (b.path === '/') {\n        return /^\\/(:|\\*)/.test(a.path) ? 1 : -1\n      }\n      let i = 0\n      let res = 0\n      let y = 0\n      let z = 0\n      const _a = a.path.split('/')\n      const _b = b.path.split('/')\n      for (i = 0; i < _a.length; i++) {\n        if (res !== 0) {\n          break\n        }\n        y = _a[i] === '*' ? 2 : _a[i].indexOf(':') > -1 ? 1 : 0\n        z = _b[i] === '*' ? 2 : _b[i].indexOf(':') > -1 ? 1 : 0\n        res = y - z\n        // If a.length >= b.length\n        if (i === _b.length - 1 && res === 0) {\n          // change order if * found\n          res = _a[i] === '*' ? -1 : 1\n        }\n      }\n      return res === 0 ? (_a[i - 1] === '*' && _b[i] ? 1 : -1) : res\n    })\n  })\n  return cleanChildrenRoutes(routes)\n}\n","import path from 'path'\nimport fs from 'fs'\nimport hash from 'hash-sum'\nimport { chainFn, sequence } from '../common/utils'\n\nexport default class ModuleContainer {\n  constructor(nuxt) {\n    this.nuxt = nuxt\n    this.options = nuxt.options\n    this.requiredModules = {}\n  }\n\n  async ready() {\n    // Call before hook\n    await this.nuxt.callHook('modules:before', this, this.options.modules)\n\n    // Load every module in sequence\n    await sequence(this.options.modules, this.addModule.bind(this))\n\n    // Call done hook\n    await this.nuxt.callHook('modules:done', this)\n  }\n\n  addVendor(vendor) {\n    // Make it silent for backward compability with nuxt 1.x\n  }\n\n  addTemplate(template) {\n    /* istanbul ignore if */\n    if (!template) {\n      throw new Error('Invalid template:' + JSON.stringify(template))\n    }\n\n    // Validate & parse source\n    const src = template.src || template\n    const srcPath = path.parse(src)\n    /* istanbul ignore if */\n    if (!src || typeof src !== 'string' || !fs.existsSync(src)) {\n      throw new Error('Template src not found:' + src)\n    }\n\n    // Generate unique and human readable dst filename\n    const dst =\n      template.fileName ||\n      path.basename(srcPath.dir) + `.${srcPath.name}.${hash(src)}` + srcPath.ext\n\n    // Add to templates list\n    const templateObj = {\n      src,\n      dst,\n      options: template.options\n    }\n\n    this.options.build.templates.push(templateObj)\n    return templateObj\n  }\n\n  addPlugin(template) {\n    const { dst } = this.addTemplate(template)\n\n    // Add to nuxt plugins\n    this.options.plugins.unshift({\n      src: path.join(this.options.buildDir, dst),\n      ssr: template.ssr\n    })\n  }\n\n  addLayout(template, name) {\n    const { dst, src } = this.addTemplate(template)\n\n    // Add to nuxt layouts\n    this.options.layouts[name || path.parse(src).name] = `./${dst}`\n  }\n\n  addServerMiddleware(middleware) {\n    this.options.serverMiddleware.push(middleware)\n  }\n\n  extendBuild(fn) {\n    this.options.build.extend = chainFn(this.options.build.extend, fn)\n  }\n\n  extendRoutes(fn) {\n    this.options.router.extendRoutes = chainFn(\n      this.options.router.extendRoutes,\n      fn\n    )\n  }\n\n  requireModule(moduleOpts) {\n    return this.addModule(moduleOpts, true /* require once */)\n  }\n\n  async addModule(moduleOpts, requireOnce) {\n    let src\n    let options\n    let handler\n\n    // Type 1: String\n    if (typeof moduleOpts === 'string') {\n      src = moduleOpts\n    } else if (Array.isArray(moduleOpts)) {\n      // Type 2: Babel style array\n      src = moduleOpts[0]\n      options = moduleOpts[1]\n    } else if (typeof moduleOpts === 'object') {\n      // Type 3: Pure object\n      src = moduleOpts.src\n      options = moduleOpts.options\n      handler = moduleOpts.handler\n    }\n\n    // Resolve handler\n    if (!handler) {\n      handler = this.nuxt.requireModule(src, { esm: false })\n    }\n\n    // Validate handler\n    /* istanbul ignore if */\n    if (typeof handler !== 'function') {\n      throw new Error('Module should export a function: ' + src)\n    }\n\n    // Resolve module meta\n    const key = (handler.meta && handler.meta.name) || handler.name || src\n\n    // Update requiredModules\n    if (typeof key === 'string') {\n      if (requireOnce && this.requiredModules[key]) {\n        return\n      }\n      this.requiredModules[key] = { src, options, handler }\n    }\n\n    // Default module options to empty object\n    if (options === undefined) {\n      options = {}\n    }\n\n    return new Promise((resolve, reject) => {\n      // Call module with `this` context and pass options\n      const result = handler.call(this, options)\n\n      // If module send back a promise\n      if (result && result.then) {\n        return resolve(result)\n      }\n\n      // synchronous\n      return resolve()\n    })\n  }\n}\n","export default {\n  universal: {\n    build: {\n      ssr: true\n    },\n    render: {\n      ssr: true\n    }\n  },\n  spa: {\n    build: {\n      ssr: false\n    },\n    render: {\n      ssr: false\n    }\n  }\n}\n","import path from 'path'\nimport fs from 'fs'\nimport env from 'std-env'\n\nconst nuxtDir = fs.existsSync(path.resolve(__dirname, '..', 'package.json'))\n  ? path.resolve(__dirname, '..') // dist\n  : path.resolve(__dirname, '..', '..') // src\n\nexport default {\n  // Information about running environment\n  dev: Boolean(env.dev),\n  debug: undefined, // = dev\n\n  // Mode\n  mode: 'universal',\n\n  // Dirs\n  buildDir: '.nuxt',\n  nuxtDir,\n  nuxtAppDir: path.resolve(nuxtDir, 'lib', 'app'),\n  modulesDir: ['node_modules'], // ~> relative to options.rootDir\n\n  // Ignore\n  ignorePrefix: '-',\n  ignore: [\n    '**/*.test.*'\n  ],\n\n  extensions: [],\n\n  build: {\n    analyze: false,\n    profile: process.argv.includes('--profile'),\n    maxChunkSize: false,\n    extractCSS: false,\n    cssSourceMap: undefined,\n    ssr: undefined,\n    parallel: false,\n    cache: false,\n    publicPath: '/_nuxt/',\n    filenames: {\n      app: '[name].[contenthash].js',\n      chunk: '[name].[contenthash].js',\n      css: '[name].[contenthash].css'\n    },\n    styleResources: {},\n    plugins: [],\n    optimization: {\n      splitChunks: {\n        chunks: 'all',\n        automaticNameDelimiter: '.',\n        name: undefined,\n        cacheGroups: {}\n      }\n    },\n    splitChunks: {\n      layouts: false,\n      pages: true,\n      commons: true\n    },\n    babel: {\n      babelrc: false,\n      cacheDirectory: undefined\n    },\n    transpile: [], // Name of NPM packages to be transpiled\n    vueLoader: {},\n    postcss: {},\n    templates: [],\n    watch: [],\n    devMiddleware: {},\n    hotMiddleware: {},\n    stats: {\n      chunks: false,\n      children: false,\n      modules: false,\n      colors: true,\n      warnings: true,\n      errors: true,\n      excludeAssets: [\n        /.map$/,\n        /index\\..+\\.html$/,\n        /vue-ssr-client-manifest.json/\n      ]\n    }\n  },\n  generate: {\n    dir: 'dist',\n    routes: [],\n    concurrency: 500,\n    interval: 0,\n    subFolders: true,\n    fallback: '200.html',\n    minify: {\n      collapseBooleanAttributes: true,\n      collapseWhitespace: false,\n      decodeEntities: true,\n      minifyCSS: true,\n      minifyJS: true,\n      processConditionalComments: true,\n      removeAttributeQuotes: false,\n      removeComments: false,\n      removeEmptyAttributes: true,\n      removeOptionalTags: true,\n      removeRedundantAttributes: true,\n      removeScriptTypeAttributes: false,\n      removeStyleLinkTypeAttributes: false,\n      removeTagWhitespace: false,\n      sortAttributes: true,\n      sortClassName: false,\n      trimCustomFragments: true,\n      useShortDoctype: true\n    }\n  },\n  env: {},\n  head: {\n    meta: [],\n    link: [],\n    style: [],\n    script: []\n  },\n  plugins: [],\n  css: [],\n  modules: [],\n  layouts: {},\n  serverMiddleware: [],\n  ErrorPage: null,\n  loading: {\n    color: 'black',\n    failedColor: 'red',\n    height: '2px',\n    duration: 5000,\n    rtl: false\n  },\n  loadingIndicator: 'default',\n  transition: {\n    name: 'page',\n    mode: 'out-in',\n    appear: false,\n    appearClass: 'appear',\n    appearActiveClass: 'appear-active',\n    appearToClass: 'appear-to'\n  },\n  layoutTransition: {\n    name: 'layout',\n    mode: 'out-in'\n  },\n  dir: {\n    assets: 'assets',\n    layouts: 'layouts',\n    middleware: 'middleware',\n    pages: 'pages',\n    static: 'static',\n    store: 'store'\n  },\n  router: {\n    mode: 'history',\n    base: '/',\n    routes: [],\n    middleware: [],\n    linkActiveClass: 'nuxt-link-active',\n    linkExactActiveClass: 'nuxt-link-exact-active',\n    extendRoutes: null,\n    scrollBehavior: null,\n    parseQuery: false,\n    stringifyQuery: false,\n    fallback: false\n  },\n  render: {\n    bundleRenderer: {\n      shouldPrefetch: () => false\n    },\n    resourceHints: true,\n    ssr: undefined,\n    http2: {\n      push: false,\n      shouldPush: null\n    },\n    static: {\n      prefix: true\n    },\n    gzip: {\n      threshold: 0\n    },\n    etag: {\n      weak: false\n    },\n    csp: false\n  },\n  watchers: {\n    webpack: {},\n    chokidar: {}\n  },\n  editor: undefined,\n  hooks: null,\n  messages: {\n    loading: 'Loading...',\n    error_404: 'This page could not be found',\n    server_error: 'Server error',\n    nuxtjs: 'Nuxt.js',\n    back_to_home: 'Back to the home page',\n    server_error_details:\n      'An error occurred in the application and your page could not be served. If you are the application owner, check your logs for details.',\n    client_error: 'Error',\n    client_error_details:\n      'An error occurred while rendering the page. Check developer tools console for details.'\n  }\n}\n","import path from 'path'\nimport fs from 'fs'\n\nimport _ from 'lodash'\nimport consola from 'consola'\n\nimport { isUrl, isPureObject } from '../common/utils'\n\nimport modes from './modes'\nimport defaults from './nuxt.config'\n\nconst Options = {}\n\nexport default Options\n\nOptions.from = function (_options) {\n  // Clone options to prevent unwanted side-effects\n  const options = Object.assign({}, _options)\n\n  // Normalize options\n  if (options.loading === true) {\n    delete options.loading\n  }\n  if (\n    options.router &&\n    options.router.middleware &&\n    !Array.isArray(options.router.middleware)\n  ) {\n    options.router.middleware = [options.router.middleware]\n  }\n  if (options.router && typeof options.router.base === 'string') {\n    options._routerBaseSpecified = true\n  }\n  if (typeof options.transition === 'string') {\n    options.transition = { name: options.transition }\n  }\n  if (typeof options.layoutTransition === 'string') {\n    options.layoutTransition = { name: options.layoutTransition }\n  }\n  if (typeof options.extensions === 'string') {\n    options.extensions = [options.extensions]\n  }\n\n  const hasValue = v => typeof v === 'string' && v\n  options.rootDir = hasValue(options.rootDir) ? options.rootDir : process.cwd()\n\n  // Apply defaults by ${buildDir}/dist/build.config.js\n  // TODO: Unsafe operation.\n  // const buildDir = options.buildDir || defaults.buildDir\n  // const buildConfig = resolve(options.rootDir, buildDir, 'build.config.js')\n  // if (existsSync(buildConfig)) {\n  //   _.defaultsDeep(options, require(buildConfig))\n  // }\n\n  // Apply defaults\n  _.defaultsDeep(options, defaults)\n\n  // Resolve dirs\n  options.srcDir = hasValue(options.srcDir)\n    ? path.resolve(options.rootDir, options.srcDir)\n    : options.rootDir\n  options.buildDir = path.resolve(options.rootDir, options.buildDir)\n\n  // Populate modulesDir\n  options.modulesDir = []\n    .concat(options.modulesDir)\n    .concat(path.join(options.nuxtDir, 'node_modules'))\n    .filter(dir => hasValue(dir))\n    .map(dir => path.resolve(options.rootDir, dir))\n\n  // Sanitize extensions\n  if (options.extensions.indexOf('js') === -1) {\n    options.extensions.unshift('js')\n  }\n\n  if (options.extensions.indexOf('mjs') === -1) {\n    options.extensions.unshift('mjs')\n  }\n\n  // If app.html is defined, set the template path to the user template\n  options.appTemplatePath = path.resolve(options.buildDir, 'views/app.template.html')\n  if (fs.existsSync(path.join(options.srcDir, 'app.html'))) {\n    options.appTemplatePath = path.join(options.srcDir, 'app.html')\n  }\n\n  // Ignore publicPath on dev\n  /* istanbul ignore if */\n  if (options.dev && isUrl(options.build.publicPath)) {\n    options.build.publicPath = defaults.build.publicPath\n  }\n\n  // If store defined, update store options to true unless explicitly disabled\n  if (\n    options.store !== false &&\n    fs.existsSync(path.join(options.srcDir, options.dir.store)) &&\n    fs.readdirSync(path.join(options.srcDir, options.dir.store))\n      .find(filename => filename !== 'README.md' && filename[0] !== '.')\n  ) {\n    options.store = true\n  }\n\n  // SPA loadingIndicator\n  if (options.loadingIndicator) {\n    // Normalize loadingIndicator\n    if (!isPureObject(options.loadingIndicator)) {\n      options.loadingIndicator = { name: options.loadingIndicator }\n    }\n\n    // Apply defaults\n    options.loadingIndicator = Object.assign(\n      {\n        name: 'default',\n        color: (options.loading && options.loading.color) || '#D3D3D3',\n        color2: '#F5F5F5',\n        background: (options.manifest && options.manifest.theme_color) || 'white',\n        dev: options.dev,\n        loading: options.messages.loading\n      },\n      options.loadingIndicator\n    )\n  }\n\n  // Debug errors\n  if (options.debug === undefined) {\n    options.debug = options.dev\n  }\n\n  // Apply default hash to CSP option\n  const csp = options.render.csp\n  const cspDefaults = {\n    hashAlgorithm: 'sha256',\n    allowedSources: undefined,\n    policies: undefined\n  }\n  if (csp) {\n    options.render.csp = _.defaults(_.isObject(csp) ? csp : {}, cspDefaults)\n  }\n\n  // cssSourceMap\n  if (options.build.cssSourceMap === undefined) {\n    options.build.cssSourceMap = options.dev\n  }\n\n  // babel cacheDirectory\n  if (options.build.babel.cacheDirectory === undefined) {\n    options.build.babel.cacheDirectory = options.dev\n  }\n\n  // Normalize ignore\n  options.ignore = options.ignore ? [].concat(options.ignore) : []\n\n  // Append ignorePrefix glob to ignore\n  if (typeof options.ignorePrefix === 'string') {\n    options.ignore.push(`**/${options.ignorePrefix}*.*`)\n  }\n\n  // Apply mode preset\n  const modePreset = modes[options.mode || 'universal'] || modes['universal']\n  _.defaultsDeep(options, modePreset)\n\n  // If no server-side rendering, add appear true transition\n  /* istanbul ignore if */\n  if (options.render.ssr === false && options.transition) {\n    options.transition.appear = true\n  }\n\n  // We assume the SPA fallback path is 404.html (for GitHub Pages, Surge, etc.)\n  if (options.generate.fallback === true) {\n    options.generate.fallback = '404.html'\n  }\n\n  // Enable [name] when analyze or dev mode\n  if (options.build.optimization.splitChunks.name === undefined &&\n    (options.dev || options.build.analyze)) {\n    options.build.optimization.splitChunks.name = true\n  }\n\n  if (options.build.stats === 'none') {\n    options.build.stats = false\n  }\n\n  // Vendor backward compatibility with nuxt 1.x\n  if (typeof options.build.vendor !== 'undefined') {\n    delete options.build.vendor\n    consola.warn('vendor has been deprecated due to webpack4 optimization')\n  }\n\n  // TODO: remove when mini-css-extract-plugin supports HMR\n  if (options.dev) {\n    options.build.extractCSS = false\n  }\n\n  // include SFCs in node_modules\n  options.build.transpile = [/\\.vue\\.js/].concat(options.build.transpile || [])\n\n  return options\n}\n","import Vue from 'vue'\nimport VueMeta from 'vue-meta'\nimport { createRenderer } from 'vue-server-renderer'\nimport LRU from 'lru-cache'\n\nexport default class MetaRenderer {\n  constructor(nuxt, renderer) {\n    this.nuxt = nuxt\n    this.renderer = renderer\n    this.options = nuxt.options\n    this.vueRenderer = createRenderer()\n    this.cache = LRU({})\n\n    // Add VueMeta to Vue (this is only for SPA mode)\n    // See lib/app/index.js\n    Vue.use(VueMeta, {\n      keyName: 'head',\n      attribute: 'data-n-head',\n      ssrAttribute: 'data-n-head-ssr',\n      tagIDKeyName: 'hid'\n    })\n  }\n\n  async getMeta(url) {\n    const vm = new Vue({\n      render: h => h(), // Render empty html tag\n      head: this.options.head || {}\n    })\n    await this.vueRenderer.renderToString(vm)\n    return vm.$meta().inject()\n  }\n\n  async render({ url = '/' }) {\n    let meta = this.cache.get(url)\n\n    if (meta) {\n      return meta\n    }\n\n    meta = {\n      HTML_ATTRS: '',\n      BODY_ATTRS: '',\n      HEAD: '',\n      BODY_SCRIPTS: ''\n    }\n\n    // Get vue-meta context\n    const m = await this.getMeta(url)\n\n    // HTML_ATTRS\n    meta.HTML_ATTRS = m.htmlAttrs.text()\n\n    // BODY_ATTRS\n    meta.BODY_ATTRS = m.bodyAttrs.text()\n\n    // HEAD tags\n    meta.HEAD =\n      m.title.text() +\n      m.meta.text() +\n      m.link.text() +\n      m.style.text() +\n      m.script.text() +\n      m.noscript.text()\n\n    // BODY_SCRIPTS\n    meta.BODY_SCRIPTS = m.script.text({ body: true }) + m.noscript.text({ body: true })\n\n    // Resources Hints\n\n    meta.resourceHints = ''\n\n    const clientManifest = this.renderer.resources.clientManifest\n\n    const shouldPreload = this.options.render.bundleRenderer.shouldPreload || (() => true)\n    const shouldPrefetch = this.options.render.bundleRenderer.shouldPrefetch || (() => true)\n\n    if (this.options.render.resourceHints && clientManifest) {\n      const publicPath = clientManifest.publicPath || '/_nuxt/'\n\n      // Preload initial resources\n      if (Array.isArray(clientManifest.initial)) {\n        meta.resourceHints += clientManifest.initial\n          .filter(file => shouldPreload(file))\n          .map(\n            r => `<link rel=\"preload\" href=\"${publicPath}${r}\" as=\"script\" />`\n          )\n          .join('')\n      }\n\n      // Prefetch async resources\n      if (Array.isArray(clientManifest.async)) {\n        meta.resourceHints += clientManifest.async\n          .filter(file => shouldPrefetch(file))\n          .map(r => `<link rel=\"prefetch\" href=\"${publicPath}${r}\" />`)\n          .join('')\n      }\n\n      // Add them to HEAD\n      if (meta.resourceHints) {\n        meta.HEAD += meta.resourceHints\n      }\n    }\n\n    // Emulate getPreloadFiles from vue-server-renderer (works for JS chunks only)\n    meta.getPreloadFiles = () =>\n      clientManifest.initial\n        .filter(file => shouldPreload(file))\n        .map(r => ({\n          file: r,\n          fileWithoutQuery: r,\n          asType: 'script',\n          extension: 'js'\n        }))\n\n    // Set meta tags inside cache\n    this.cache.set(url, meta)\n\n    return meta\n  }\n}\n","import path from 'path'\nimport consola from 'consola'\n\nimport Youch from '@nuxtjs/youch'\nimport fs from 'fs-extra'\n\nexport default function errorMiddleware(err, req, res, next) {\n  // ensure statusCode, message and name fields\n  err.statusCode = err.statusCode || 500\n  err.message = err.message || 'Nuxt Server Error'\n  err.name = !err.name || err.name === 'Error' ? 'NuxtServerError' : err.name\n\n  // We hide actual errors from end users, so show them on server logs\n  if (err.statusCode !== 404) {\n    consola.error(err)\n  }\n\n  const sendResponse = (content, type = 'text/html') => {\n    // Set Headers\n    res.statusCode = err.statusCode\n    res.statusMessage = err.name\n    res.setHeader('Content-Type', type + '; charset=utf-8')\n    res.setHeader('Content-Length', Buffer.byteLength(content))\n\n    // Send Response\n    res.end(content, 'utf-8')\n  }\n\n  // Check if request accepts JSON\n  const hasReqHeader = (header, includes) =>\n    req.headers[header] && req.headers[header].toLowerCase().includes(includes)\n  const isJson =\n    hasReqHeader('accept', 'application/json') ||\n    hasReqHeader('user-agent', 'curl/')\n\n  // Use basic errors when debug mode is disabled\n  if (!this.options.debug) {\n    // Json format is compatible with Youch json responses\n    const json = {\n      status: err.statusCode,\n      message: err.message,\n      name: err.name\n    }\n    if (isJson) {\n      sendResponse(JSON.stringify(json, undefined, 2), 'text/json')\n      return\n    }\n    const html = this.resources.errorTemplate(json)\n    sendResponse(html)\n    return\n  }\n\n  // Show stack trace\n  const youch = new Youch(\n    err,\n    req,\n    readSource.bind(this),\n    this.options.router.base,\n    true\n  )\n  if (isJson) {\n    youch.toJSON().then(json => {\n      sendResponse(JSON.stringify(json, undefined, 2), 'text/json')\n    })\n  } else {\n    youch.toHTML().then(html => {\n      sendResponse(html)\n    })\n  }\n}\n\nasync function readSource(frame) {\n  // Remove webpack:/// & query string from the end\n  const sanitizeName = name =>\n    name ? name.replace('webpack:///', '').split('?')[0] : null\n  frame.fileName = sanitizeName(frame.fileName)\n\n  // Return if fileName is unknown\n  /* istanbul ignore if */\n  if (!frame.fileName) {\n    return\n  }\n\n  // Possible paths for file\n  const searchPath = [\n    this.options.srcDir,\n    this.options.rootDir,\n    path.join(this.options.buildDir, 'dist'),\n    this.options.buildDir,\n    process.cwd()\n  ]\n\n  // Scan filesystem for real source\n  for (let pathDir of searchPath) {\n    let fullPath = path.resolve(pathDir, frame.fileName)\n    let source = await fs.readFile(fullPath, 'utf-8').catch(() => null)\n    if (source) {\n      frame.contents = source\n      frame.fullPath = fullPath\n      if (path.isAbsolute(frame.fileName)) {\n        frame.fileName = path.relative(this.options.rootDir, fullPath)\n      }\n      return\n    }\n  }\n\n  // Fallback: use server bundle\n  // TODO: restore to if after https://github.com/istanbuljs/nyc/issues/595 fixed\n  /* istanbul ignore next */\n  if (!frame.contents) {\n    frame.contents = this.resources.serverBundle.files[frame.fileName]\n  }\n}\n","import generateETag from 'etag'\nimport fresh from 'fresh'\nimport consola from 'consola'\n\nimport { getContext } from '../../common/utils'\n\nexport default async function nuxtMiddleware(req, res, next) {\n  // Get context\n  const context = getContext(req, res)\n\n  res.statusCode = 200\n  try {\n    const result = await this.renderRoute(req.url, context)\n    await this.nuxt.callHook('render:route', req.url, result, context)\n    const {\n      html,\n      cspScriptSrcHashes,\n      error,\n      redirected,\n      getPreloadFiles\n    } = result\n\n    if (redirected) {\n      return html\n    }\n    if (error) {\n      res.statusCode = context.nuxt.error.statusCode || 500\n    }\n\n    // Add ETag header\n    if (!error && this.options.render.etag) {\n      const etag = generateETag(html, this.options.render.etag)\n      if (fresh(req.headers, { etag })) {\n        res.statusCode = 304\n        res.end()\n        return\n      }\n      res.setHeader('ETag', etag)\n    }\n\n    // HTTP2 push headers for preload assets\n    if (!error && this.options.render.http2.push) {\n      // Parse resourceHints to extract HTTP.2 prefetch/push headers\n      // https://w3c.github.io/preload/#server-push-http-2\n      const pushAssets = []\n      const preloadFiles = getPreloadFiles()\n      const { shouldPush } = this.options.render.http2\n      const { publicPath } = this.resources.clientManifest\n\n      preloadFiles.forEach(({ file, asType, fileWithoutQuery, extension }) => {\n        // By default, we only preload scripts or css\n        /* istanbul ignore if */\n        if (!shouldPush && asType !== 'script' && asType !== 'style') {\n          return\n        }\n\n        // User wants to explicitly control what to preload\n        if (shouldPush && !shouldPush(fileWithoutQuery, asType)) {\n          return\n        }\n\n        pushAssets.push(`<${publicPath}${file}>; rel=preload; as=${asType}`)\n      })\n\n      // Pass with single Link header\n      // https://blog.cloudflare.com/http-2-server-push-with-multiple-assets-per-link-header\n      // https://www.w3.org/Protocols/9707-link-header.html\n      res.setHeader('Link', pushAssets.join(','))\n    }\n\n    if (this.options.render.csp) {\n      const { allowedSources, policies } = this.options.render.csp\n      let cspStr = `script-src 'self'${this.options.dev ? \" 'unsafe-eval'\" : ''} ${(cspScriptSrcHashes).join(' ')}`\n      if (Array.isArray(allowedSources)) {\n        // For compatible section\n        cspStr += ' ' + allowedSources.join(' ')\n      } else if (typeof policies === 'object' && policies !== null && !Array.isArray(policies)) {\n        // Set default policy if necessary\n        if (!policies['script-src'] || !Array.isArray(policies['script-src'])) {\n          policies['script-src'] = [`'self'`].concat(cspScriptSrcHashes)\n        } else {\n          policies['script-src'] = cspScriptSrcHashes.concat(policies['script-src'])\n          if (!policies['script-src'].includes(`'self'`)) {\n            policies['script-src'] = [`'self'`].concat(policies['script-src'])\n          }\n        }\n\n        // Make content-security-policy string\n        let cspArr = []\n        Object.keys(policies).forEach((k) => {\n          cspArr.push(`${k} ${policies[k].join(' ')}`)\n        })\n        cspStr = cspArr.join('; ')\n      }\n      res.setHeader('Content-Security-Policy', cspStr)\n    }\n\n    // Send response\n    res.setHeader('Content-Type', 'text/html; charset=utf-8')\n    res.setHeader('Content-Length', Buffer.byteLength(html))\n    res.end(html, 'utf8')\n    return html\n  } catch (err) {\n    /* istanbul ignore if */\n    if (context && context.redirected) {\n      consola.error(err)\n      return err\n    }\n\n    next(err)\n  }\n}\n","import path from 'path'\nimport crypto from 'crypto'\n\nimport serialize from 'serialize-javascript'\nimport serveStatic from 'serve-static'\nimport compression from 'compression'\nimport _ from 'lodash'\nimport fs from 'fs-extra'\nimport { createBundleRenderer } from 'vue-server-renderer'\nimport connect from 'connect'\nimport launchMiddleware from 'launch-editor-middleware'\nimport consola from 'consola'\n\nimport { isUrl, waitFor, timeout } from '../common/utils'\nimport defaults from '../common/nuxt.config'\n\nimport MetaRenderer from './meta'\nimport errorMiddleware from './middleware/error'\nimport nuxtMiddleware from './middleware/nuxt'\n\nlet jsdom = null\n\nexport default class Renderer {\n  constructor(nuxt) {\n    this.nuxt = nuxt\n    this.options = nuxt.options\n\n    // Will be set by createRenderer\n    this.bundleRenderer = null\n    this.metaRenderer = null\n\n    // Will be available on dev\n    this.webpackDevMiddleware = null\n    this.webpackHotMiddleware = null\n\n    // Create new connect instance\n    this.app = connect()\n\n    // Renderer runtime resources\n    this.resources = {\n      clientManifest: null,\n      serverBundle: null,\n      ssrTemplate: null,\n      spaTemplate: null,\n      errorTemplate: parseTemplate('Nuxt.js Internal Server Error')\n    }\n  }\n\n  async ready() {\n    await this.nuxt.callHook('render:before', this, this.options.render)\n    // Setup nuxt middleware\n    await this.setupMiddleware()\n\n    // Production: Load SSR resources from fs\n    if (!this.options.dev) {\n      await this.loadResources()\n    }\n\n    // Call done hook\n    await this.nuxt.callHook('render:done', this)\n  }\n\n  async loadResources(_fs = fs) {\n    let distPath = path.resolve(this.options.buildDir, 'dist')\n    let updated = []\n\n    resourceMap.forEach(({ key, fileName, transform }) => {\n      let rawKey = '$$' + key\n      const _path = path.join(distPath, fileName)\n\n      let rawData, data\n      if (!_fs.existsSync(_path)) {\n        return // Resource not exists\n      }\n      rawData = _fs.readFileSync(_path, 'utf8')\n      if (!rawData || rawData === this.resources[rawKey]) {\n        return // No changes\n      }\n      this.resources[rawKey] = rawData\n      data = transform(rawData)\n      /* istanbul ignore if */\n      if (!data) {\n        return // Invalid data ?\n      }\n      this.resources[key] = data\n      updated.push(key)\n    })\n\n    // Reload error template\n    const errorTemplatePath = path.resolve(this.options.buildDir, 'views/error.html')\n    if (fs.existsSync(errorTemplatePath)) {\n      this.resources.errorTemplate = parseTemplate(\n        fs.readFileSync(errorTemplatePath, 'utf8')\n      )\n    }\n\n    // Load loading template\n    const loadingHTMLPath = path.resolve(this.options.buildDir, 'loading.html')\n    if (fs.existsSync(loadingHTMLPath)) {\n      this.resources.loadingHTML = fs.readFileSync(loadingHTMLPath, 'utf8')\n      this.resources.loadingHTML = this.resources.loadingHTML\n        .replace(/\\r|\\n|[\\t\\s]{3,}/g, '')\n    } else {\n      this.resources.loadingHTML = ''\n    }\n\n    // Call resourcesLoaded plugin\n    await this.nuxt.callHook('render:resourcesLoaded', this.resources)\n\n    if (updated.length > 0) {\n      this.createRenderer()\n    }\n  }\n\n  get noSSR() {\n    return this.options.render.ssr === false\n  }\n\n  get isReady() {\n    if (this.noSSR) {\n      return Boolean(this.resources.spaTemplate)\n    }\n\n    return Boolean(this.bundleRenderer && this.resources.ssrTemplate)\n  }\n\n  get isResourcesAvailable() {\n    // Required for both\n    /* istanbul ignore if */\n    if (!this.resources.clientManifest) {\n      return false\n    }\n\n    // Required for SPA rendering\n    if (this.noSSR) {\n      return Boolean(this.resources.spaTemplate)\n    }\n\n    // Required for bundle renderer\n    return Boolean(this.resources.ssrTemplate && this.resources.serverBundle)\n  }\n\n  createRenderer() {\n    // Ensure resources are available\n    if (!this.isResourcesAvailable) {\n      return\n    }\n\n    // Create Meta Renderer\n    this.metaRenderer = new MetaRenderer(this.nuxt, this)\n\n    // Skip following steps if noSSR mode\n    if (this.noSSR) {\n      return\n    }\n\n    // Create bundle renderer for SSR\n    this.bundleRenderer = createBundleRenderer(\n      this.resources.serverBundle,\n      Object.assign(\n        {\n          clientManifest: this.resources.clientManifest,\n          runInNewContext: false,\n          basedir: this.options.rootDir\n        },\n        this.options.render.bundleRenderer\n      )\n    )\n  }\n\n  useMiddleware(m) {\n    // Resolve\n    const $m = m\n    let src\n    if (typeof m === 'string') {\n      m = this.nuxt.requireModule(m)\n    }\n    if (typeof m.handler === 'string') {\n      m.handler = this.nuxt.requireModule(m.handler)\n    }\n\n    const handler = m.handler || m\n    const path = (\n      (m.prefix !== false ? this.options.router.base : '') +\n      (typeof m.path === 'string' ? m.path : '')\n    ).replace(/\\/\\//g, '/')\n\n    // Inject $src and $m to final handler\n    if (src) handler.$src = src\n    handler.$m = $m\n\n    // Use middleware\n    this.app.use(path, handler)\n  }\n\n  get publicPath() {\n    return isUrl(this.options.build.publicPath)\n      ? defaults.build.publicPath\n      : this.options.build.publicPath\n  }\n\n  async setupMiddleware() {\n    // Apply setupMiddleware from modules first\n    await this.nuxt.callHook('render:setupMiddleware', this.app)\n\n    // Gzip middleware for production\n    if (!this.options.dev && this.options.render.gzip) {\n      this.useMiddleware(compression(this.options.render.gzip))\n    }\n\n    // Common URL checks\n    this.useMiddleware((req, res, next) => {\n      // Prevent access to SSR resources\n      if (ssrResourceRegex.test(req.url)) {\n        res.statusCode = 404\n        return res.end()\n      }\n      next()\n    })\n\n    // Add webpack middleware only for development\n    if (this.options.dev) {\n      this.useMiddleware(async (req, res, next) => {\n        if (this.webpackDevMiddleware) {\n          await this.webpackDevMiddleware(req, res)\n        }\n        if (this.webpackHotMiddleware) {\n          await this.webpackHotMiddleware(req, res)\n        }\n        next()\n      })\n    }\n\n    // open in editor for debug mode only\n    if (this.options.debug && this.options.dev) {\n      this.useMiddleware({\n        path: '__open-in-editor',\n        handler: launchMiddleware(this.options.editor)\n      })\n    }\n\n    // For serving static/ files to /\n    const staticMiddleware = serveStatic(\n      path.resolve(this.options.srcDir, this.options.dir.static),\n      this.options.render.static\n    )\n    staticMiddleware.prefix = this.options.render.static.prefix\n    this.useMiddleware(staticMiddleware)\n\n    // Serve .nuxt/dist/ files only for production\n    // For dev they will be served with devMiddleware\n    if (!this.options.dev) {\n      const distDir = path.resolve(this.options.buildDir, 'dist')\n      this.useMiddleware({\n        path: this.publicPath,\n        handler: serveStatic(distDir, {\n          index: false, // Don't serve index.html template\n          maxAge: '1y' // 1 year in production\n        })\n      })\n    }\n\n    // Add User provided middleware\n    this.options.serverMiddleware.forEach(m => {\n      this.useMiddleware(m)\n    })\n\n    // Finally use nuxtMiddleware\n    this.useMiddleware(nuxtMiddleware.bind(this))\n\n    // Error middleware for errors that occurred in middleware that declared above\n    // Middleware should exactly take 4 arguments\n    // https://github.com/senchalabs/connect#error-middleware\n\n    // Apply errorMiddleware from modules first\n    await this.nuxt.callHook('render:errorMiddleware', this.app)\n\n    // Apply errorMiddleware from Nuxt\n    this.useMiddleware(errorMiddleware.bind(this))\n  }\n\n  renderTemplate(ssr, opts) {\n    // Fix problem with HTMLPlugin's minify option (#3392)\n    opts.html_attrs = opts.HTML_ATTRS\n    opts.body_attrs = opts.BODY_ATTRS\n\n    const fn = ssr ? this.resources.ssrTemplate : this.resources.spaTemplate\n\n    return fn(opts)\n  }\n\n  async renderRoute(url, context = {}) {\n    /* istanbul ignore if */\n    if (!this.isReady) {\n      await waitFor(1000)\n      return this.renderRoute(url, context)\n    }\n\n    // Log rendered url\n    consola.debug(`Rendering url ${url}`)\n\n    // Add url and isSever to the context\n    context.url = url\n\n    // Basic response if SSR is disabled or spa data provided\n    const spa = context.spa || (context.res && context.res.spa)\n    const ENV = this.options.env\n\n    if (this.noSSR || spa) {\n      const {\n        HTML_ATTRS,\n        BODY_ATTRS,\n        HEAD,\n        BODY_SCRIPTS,\n        getPreloadFiles\n      } = await this.metaRenderer.render(context)\n      const APP =\n        `<div id=\"__nuxt\">${this.resources.loadingHTML}</div>` + BODY_SCRIPTS\n\n      // Detect 404 errors\n      if (\n        url.includes(this.options.build.publicPath) ||\n        url.includes('__webpack')\n      ) {\n        const err = {\n          statusCode: 404,\n          message: this.options.messages.error_404,\n          name: 'ResourceNotFound'\n        }\n        throw err\n      }\n\n      const html = this.renderTemplate(false, {\n        HTML_ATTRS,\n        BODY_ATTRS,\n        HEAD,\n        APP,\n        ENV\n      })\n\n      return { html, getPreloadFiles }\n    }\n\n    // Call renderToString from the bundleRenderer and generate the HTML (will update the context as well)\n    let APP = await this.bundleRenderer.renderToString(context)\n\n    if (!context.nuxt.serverRendered) {\n      APP = '<div id=\"__nuxt\"></div>'\n    }\n    const m = context.meta.inject()\n    let HEAD =\n      m.title.text() +\n      m.meta.text() +\n      m.link.text() +\n      m.style.text() +\n      m.script.text() +\n      m.noscript.text()\n    if (this.options._routerBaseSpecified) {\n      HEAD += `<base href=\"${this.options.router.base}\">`\n    }\n\n    if (this.options.render.resourceHints) {\n      HEAD += context.renderResourceHints()\n    }\n\n    await this.nuxt.callHook('render:context', context.nuxt)\n\n    const serializedSession = `window.__NUXT__=${serialize(context.nuxt, {\n      isJSON: true\n    })};`\n\n    const cspScriptSrcHashes = []\n    if (this.options.render.csp) {\n      const { hashAlgorithm } = this.options.render.csp\n      let hash = crypto.createHash(hashAlgorithm)\n      hash.update(serializedSession)\n      cspScriptSrcHashes.push(\n        `'${hashAlgorithm}-${hash.digest('base64')}'`\n      )\n    }\n\n    APP += `<script>${serializedSession}</script>`\n    APP += context.renderScripts()\n    APP += m.script.text({ body: true })\n    APP += m.noscript.text({ body: true })\n\n    HEAD += context.renderStyles()\n\n    const html = this.renderTemplate(true, {\n      HTML_ATTRS: 'data-n-head-ssr ' + m.htmlAttrs.text(),\n      BODY_ATTRS: m.bodyAttrs.text(),\n      HEAD,\n      APP,\n      ENV\n    })\n\n    return {\n      html,\n      cspScriptSrcHashes,\n      getPreloadFiles: context.getPreloadFiles,\n      error: context.nuxt.error,\n      redirected: context.redirected\n    }\n  }\n\n  async renderAndGetWindow(url, opts = {}) {\n    /* istanbul ignore if */\n    if (!jsdom) {\n      try {\n        jsdom = require('jsdom')\n      } catch (e) /* istanbul ignore next */ {\n        consola.error(`\n         Fail when calling nuxt.renderAndGetWindow(url)\n         jsdom module is not installed\n         Please install jsdom with: npm install --save-dev jsdom\n        `)\n        throw e\n      }\n    }\n    let options = {\n      resources: 'usable', // load subresources (https://github.com/tmpvar/jsdom#loading-subresources)\n      runScripts: 'dangerously',\n      beforeParse(window) {\n        // Mock window.scrollTo\n        window.scrollTo = () => {}\n      }\n    }\n    const jsdomErrHandler = err => { throw err }\n    if (opts.virtualConsole !== false) {\n      options.virtualConsole = new jsdom.VirtualConsole().sendTo(consola)\n      // throw error when window creation failed\n      options.virtualConsole.on('jsdomError', jsdomErrHandler)\n    }\n    url = url || 'http://localhost:3000'\n    const { window } = await jsdom.JSDOM.fromURL(url, options)\n    // If Nuxt could not be loaded (error from the server-side)\n    const nuxtExists = window.document.body.innerHTML.includes(\n      this.options.render.ssr ? 'window.__NUXT__' : '<div id=\"__nuxt\">'\n    )\n    /* istanbul ignore if */\n    if (!nuxtExists) {\n      let error = new Error('Could not load the nuxt app')\n      error.body = window.document.body.innerHTML\n      throw error\n    }\n    // Used by nuxt.js to say when the components are loaded and the app ready\n    await timeout(new Promise(resolve => {\n      window._onNuxtLoaded = () => resolve(window)\n    }), 20000, 'Components loading in renderAndGetWindow was not completed in 20s')\n    if (opts.virtualConsole !== false) {\n      // after window initialized successfully\n      options.virtualConsole.removeListener('jsdomError', jsdomErrHandler)\n    }\n    // Send back window object\n    return window\n  }\n}\n\nconst parseTemplate = templateStr =>\n  _.template(templateStr, {\n    interpolate: /{{([\\s\\S]+?)}}/g\n  })\n\nexport const resourceMap = [\n  {\n    key: 'clientManifest',\n    fileName: 'vue-ssr-client-manifest.json',\n    transform: JSON.parse\n  },\n  {\n    key: 'serverBundle',\n    fileName: 'server-bundle.json',\n    transform: JSON.parse\n  },\n  {\n    key: 'ssrTemplate',\n    fileName: 'index.ssr.html',\n    transform: parseTemplate\n  },\n  {\n    key: 'spaTemplate',\n    fileName: 'index.spa.html',\n    transform: parseTemplate\n  }\n]\n\n// Protector utility against request to SSR bundle files\nconst ssrResourceRegex = new RegExp(\n  resourceMap.map(resource => resource.fileName).join('|'),\n  'i'\n)\n","import Module from 'module'\nimport path from 'path'\n\nimport enableDestroy from 'server-destroy'\nimport _ from 'lodash'\nimport fs from 'fs-extra'\nimport consola from 'consola'\nimport chalk from 'chalk'\nimport esm from 'esm'\n\nimport Options from '../common/options'\nimport { sequence } from '../common/utils'\nimport packageJSON from '../../package.json'\n\nimport ModuleContainer from './module'\nimport Renderer from './renderer'\n\nexport default class Nuxt {\n  constructor(options = {}) {\n    this.options = Options.from(options)\n\n    this.readyMessage = null\n    this.initialized = false\n\n    // Hooks\n    this._hooks = {}\n    this.hook = this.hook.bind(this)\n\n    // Create instance of core components\n    this.moduleContainer = new ModuleContainer(this)\n    this.renderer = new Renderer(this)\n\n    // Backward compatibility\n    this.render = this.renderer.app\n    this.renderRoute = this.renderer.renderRoute.bind(this.renderer)\n    this.renderAndGetWindow = this.renderer.renderAndGetWindow.bind(\n      this.renderer\n    )\n\n    // ESM Loader\n    this.esm = esm(module, {})\n\n    this._ready = this.ready().catch(err => {\n      consola.fatal(err)\n    })\n  }\n\n  static get version() {\n    return packageJSON.version\n  }\n\n  async ready() {\n    if (this._ready) {\n      return this._ready\n    }\n\n    // Add hooks\n    if (_.isPlainObject(this.options.hooks)) {\n      this.addObjectHooks(this.options.hooks)\n    } else if (typeof this.options.hooks === 'function') {\n      this.options.hooks(this.hook)\n    }\n\n    // Await for modules\n    await this.moduleContainer.ready()\n\n    // Await for renderer to be ready\n    await this.renderer.ready()\n\n    this.initialized = true\n\n    // Call ready hook\n    await this.callHook('ready', this)\n\n    return this\n  }\n\n  hook(name, fn) {\n    if (!name || typeof fn !== 'function') {\n      return\n    }\n    this._hooks[name] = this._hooks[name] || []\n    this._hooks[name].push(fn)\n  }\n\n  async callHook(name, ...args) {\n    if (!this._hooks[name]) {\n      return\n    }\n    consola.debug(`Call ${name} hooks (${this._hooks[name].length})`)\n    try {\n      await sequence(this._hooks[name], fn => fn(...args))\n    } catch (err) {\n      consola.error(err)\n      this.callHook('error', err)\n    }\n  }\n\n  addObjectHooks(hooksObj) {\n    Object.keys(hooksObj).forEach(name => {\n      let hooks = hooksObj[name]\n      hooks = Array.isArray(hooks) ? hooks : [hooks]\n\n      hooks.forEach(hook => {\n        this.hook(name, hook)\n      })\n    })\n  }\n\n  showReady(clear = true) {\n    if (!this.readyMessage) {\n      return\n    }\n\n    consola.ready({\n      message: this.readyMessage,\n      badge: true,\n      clear\n    })\n  }\n\n  listen(port = 3000, host = 'localhost') {\n    return this.ready().then(() => new Promise((resolve, reject) => {\n      const server = this.renderer.app.listen(\n        { port, host, exclusive: false },\n        err => {\n          /* istanbul ignore if */\n          if (err) {\n            return reject(err)\n          }\n\n          const listenURL = chalk.underline.blue(`http://${host}:${port}`)\n          this.readyMessage = `Listening on ${listenURL}`\n\n          // Close server on nuxt close\n          this.hook(\n            'close',\n            () =>\n              new Promise((resolve, reject) => {\n                // Destroy server by forcing every connection to be closed\n                server.destroy(err => {\n                  consola.debug('server closed')\n                  /* istanbul ignore if */\n                  if (err) {\n                    return reject(err)\n                  }\n                  resolve()\n                })\n              })\n          )\n\n          this.callHook('listen', server, { port, host }).then(resolve)\n        }\n      )\n\n      // Add server.destroy(cb) method\n      enableDestroy(server)\n    }))\n  }\n\n  resolveAlias(_path) {\n    if (_path.indexOf('@@') === 0 || _path.indexOf('~~') === 0) {\n      return path.join(this.options.rootDir, _path.substr(2))\n    }\n\n    if (_path.indexOf('@') === 0 || _path.indexOf('~') === 0) {\n      return path.join(this.options.srcDir, _path.substr(1))\n    }\n\n    return path.resolve(this.options.srcDir, _path)\n  }\n\n  resolvePath(_path) {\n    // Try to resolve using NPM resolve path first\n    try {\n      const resolvedPath = Module._resolveFilename(_path, {\n        paths: this.options.modulesDir\n      })\n      return resolvedPath\n    } catch (error) {\n      if (error.code !== 'MODULE_NOT_FOUND') {\n        throw error\n      }\n    }\n\n    let __path = this.resolveAlias(_path)\n\n    if (fs.existsSync(__path)) {\n      return __path\n    }\n\n    for (let ext of this.options.extensions) {\n      if (fs.existsSync(__path + '.' + ext)) {\n        return __path + '.' + ext\n      }\n    }\n\n    throw new Error(`Cannot resolve \"${_path}\" from \"${__path}\"`)\n  }\n\n  requireModule(_path, opts = {}) {\n    const _resovledPath = this.resolvePath(_path)\n    const m = opts.esm === false ? require(_resovledPath) : this.esm(_resovledPath)\n    return (m && m.default) || m\n  }\n\n  async close(callback) {\n    await this.callHook('close', this)\n\n    /* istanbul ignore if */\n    if (typeof callback === 'function') {\n      await callback()\n    }\n  }\n}\n","import Module from './module'\nimport Nuxt from './nuxt'\nimport Renderer from './renderer'\n\nexport default {\n  Nuxt,\n  Module,\n  Renderer\n}\n","import path from 'path'\n\nimport { warmup } from 'thread-loader'\n\n// https://github.com/webpack-contrib/thread-loader\n// https://github.com/webpack-contrib/cache-loader\n\nexport default class PerfLoader {\n  constructor(options) {\n    this.options = options\n    this.warmup = warmup\n    this.workerPools = {\n      js: {\n        name: 'js',\n        poolTimeout: this.options.dev ? Infinity : 2000\n      },\n      css: {\n        name: 'css',\n        poolTimeout: this.options.dev ? Infinity : 2000\n      }\n    }\n  }\n\n  warmupAll() {\n    this.warmup(this.workerPools.js, ['babel-loader', 'babel-preset-env'])\n    this.warmup(this.workerPools.css, ['css-loader'])\n  }\n\n  pool(poolName, _loaders) {\n    const loaders = [].concat(_loaders)\n\n    if (this.options.build.parallel) {\n      const pool = this.workerPools[poolName]\n\n      if (pool) {\n        loaders.unshift({\n          loader: 'thread-loader',\n          options: pool\n        })\n      }\n    }\n\n    if (this.options.build.cache) {\n      loaders.unshift({\n        loader: 'cache-loader',\n        options: {\n          cacheDirectory: path.resolve('node_modules/.cache/cache-loader')\n        }\n      })\n    }\n\n    return loaders\n  }\n\n  poolOneOf(poolName, oneOfRules) {\n    // disable css thread pool since vue-style-loader needs options like: target\n    if (poolName === 'css' && !this.options.build.extractCSS) {\n      return oneOfRules\n    }\n    return oneOfRules.map(rule => Object.assign({}, rule, {\n      use: this.pool(poolName, rule.use)\n    }))\n  }\n}\n","import chalk from 'chalk'\n\nconst prefix = `[vue-server-renderer-webpack-plugin]`\nexport const warn = msg => console.error(chalk.red(`${prefix} ${msg}\\n`)) // eslint-disable-line no-console\nexport const tip = msg => console.log(chalk.yellow(`${prefix} ${msg}\\n`)) // eslint-disable-line no-console\n\nexport const validate = compiler => {\n  if (compiler.options.target !== 'node') {\n    warn('webpack config `target` should be \"node\".')\n  }\n\n  if (compiler.options.output && compiler.options.output.libraryTarget !== 'commonjs2') {\n    warn('webpack config `output.libraryTarget` should be \"commonjs2\".')\n  }\n\n  if (!compiler.options.externals) {\n    tip(\n      'It is recommended to externalize dependencies in the server build for ' +\n      'better build performance.'\n    )\n  }\n}\n\nexport const onEmit = (compiler, name, hook) => {\n  if (compiler.hooks) {\n    // Webpack >= 4.0.0\n    compiler.hooks.emit.tapAsync(name, hook)\n  } else {\n    // Webpack < 4.0.0\n    compiler.plugin('emit', hook)\n  }\n}\n\nexport const isJS = (file) => /\\.js(\\?[^.]+)?$/.test(file)\n\nexport const isCSS = (file) => /\\.css(\\?[^.]+)?$/.test(file)\n","import hash from 'hash-sum'\nimport { uniq } from 'lodash'\nimport { isJS, isCSS, onEmit } from './util'\n\nexport default class VueSSRClientPlugin {\n  constructor(options = {}) {\n    this.options = Object.assign({\n      filename: 'vue-ssr-client-manifest.json'\n    }, options)\n  }\n\n  apply(compiler) {\n    onEmit(compiler, 'vue-client-plugin', (compilation, cb) => {\n      const stats = compilation.getStats().toJson()\n\n      const allFiles = uniq(stats.assets\n        .map(a => a.name))\n\n      const initialFiles = uniq(Object.keys(stats.entrypoints)\n        .map(name => stats.entrypoints[name].assets)\n        .reduce((assets, all) => all.concat(assets), [])\n        .filter((file) => isJS(file) || isCSS(file)))\n\n      const asyncFiles = allFiles\n        .filter((file) => isJS(file) || isCSS(file))\n        .filter(file => initialFiles.indexOf(file) < 0)\n\n      const manifest = {\n        publicPath: stats.publicPath,\n        all: allFiles,\n        initial: initialFiles,\n        async: asyncFiles,\n        modules: { /* [identifier: string]: Array<index: number> */ }\n      }\n\n      const assetModules = stats.modules.filter(m => m.assets.length)\n      const fileToIndex = file => manifest.all.indexOf(file)\n      stats.modules.forEach(m => {\n        // ignore modules duplicated in multiple chunks\n        if (m.chunks.length === 1) {\n          const cid = m.chunks[0]\n          const chunk = stats.chunks.find(c => c.id === cid)\n          if (!chunk || !chunk.files) {\n            return\n          }\n          const id = m.identifier.replace(/\\s\\w+$/, '') // remove appended hash\n          const files = manifest.modules[hash(id)] = chunk.files.map(fileToIndex)\n          // find all asset modules associated with the same chunk\n          assetModules.forEach(m => {\n            if (m.chunks.some(id => id === cid)) {\n              files.push.apply(files, m.assets.map(fileToIndex))\n            }\n          })\n        }\n      })\n\n      // const debug = (file, obj) => {\n      //   require('fs').writeFileSync(__dirname + '/' + file, JSON.stringify(obj, null, 2))\n      // }\n      // debug('stats.json', stats)\n      // debug('client-manifest.json', manifest)\n\n      const json = JSON.stringify(manifest, null, 2)\n      compilation.assets[this.options.filename] = {\n        source: () => json,\n        size: () => json.length\n      }\n      cb()\n    })\n  }\n}\n","import fs from 'fs'\nimport path from 'path'\n\nimport _ from 'lodash'\nimport createResolver from 'postcss-import-resolver'\n\nimport { isPureObject } from '../../../common/utils'\n\nexport default class PostcssConfig {\n  constructor(options, nuxt) {\n    this.nuxt = nuxt\n    this.postcss = options.build.postcss\n    this.srcDir = options.srcDir\n    this.rootDir = options.rootDir\n    this.cssSourceMap = options.build.cssSourceMap\n    this.modulesDir = options.modulesDir\n  }\n\n  get defaultConfig() {\n    return {\n      useConfigFile: false,\n      sourceMap: this.cssSourceMap,\n      plugins: {\n        // https://github.com/postcss/postcss-import\n        'postcss-import': {\n          resolve: createResolver({\n            alias: {\n              '~': path.join(this.srcDir),\n              '~~': path.join(this.rootDir),\n              '@': path.join(this.srcDir),\n              '@@': path.join(this.rootDir)\n            },\n            modules: [\n              this.srcDir,\n              this.rootDir,\n              ...this.modulesDir\n            ]\n          })\n        },\n\n        // https://github.com/postcss/postcss-url\n        'postcss-url': {},\n\n        // https://github.com/csstools/postcss-preset-env\n        'postcss-preset-env': {\n          // https://cssdb.org/#staging-process\n          stage: 2\n        }\n      }\n    }\n  }\n\n  configFromFile() {\n    // Search for postCSS config file and use it if exists\n    // https://github.com/michael-ciniawsky/postcss-load-config\n    for (let dir of [this.srcDir, this.rootDir]) {\n      for (let file of [\n        'postcss.config.js',\n        '.postcssrc.js',\n        '.postcssrc',\n        '.postcssrc.json',\n        '.postcssrc.yaml'\n      ]) {\n        if (fs.existsSync(path.resolve(dir, file))) {\n          const postcssConfigPath = path.resolve(dir, file)\n          return {\n            sourceMap: this.cssSourceMap,\n            config: {\n              path: postcssConfigPath\n            }\n          }\n        }\n      }\n    }\n  }\n\n  normalize(config) {\n    if (Array.isArray(config)) {\n      config = { plugins: config }\n    }\n    return config\n  }\n\n  loadPlugins(config) {\n    const plugins = config.plugins\n    if (isPureObject(plugins)) {\n      // Map postcss plugins into instances on object mode once\n      config.plugins = Object.keys(plugins)\n        .map(p => {\n          const plugin = require(p)\n          const opts = plugins[p]\n          if (opts === false) return // Disabled\n          const instance = plugin(opts)\n          return instance\n        })\n        .filter(e => e)\n    }\n  }\n\n  config() {\n    /* istanbul ignore if */\n    if (!this.postcss) {\n      return false\n    }\n\n    let config = this.configFromFile()\n    if (config) {\n      return config\n    }\n\n    config = this.normalize(_.cloneDeep(this.postcss))\n\n    // Apply default plugins\n    if (isPureObject(config)) {\n      _.defaults(config, this.defaultConfig)\n\n      this.loadPlugins(config)\n    }\n\n    return config\n  }\n}\n","import path from 'path'\n\nimport MiniCssExtractPlugin from 'mini-css-extract-plugin'\n\nimport PostcssConfig from './postcss'\n\nexport default class StyleLoader {\n  constructor(options, nuxt, { isServer }) {\n    this.isServer = isServer\n    this.dev = options.dev\n    this.srcDir = options.srcDir\n    this.assetsDir = options.dir.assets\n    this.staticDir = options.dir.static\n    this.extractCSS = options.build.extractCSS\n    this.resources = options.build.styleResources\n    this.sourceMap = Boolean(options.build.cssSourceMap)\n\n    if (options.build.postcss) {\n      this.postcssConfig = new PostcssConfig(options, nuxt)\n    }\n  }\n\n  normalize(loaders) {\n    loaders = Array.isArray(loaders) ? loaders : [loaders]\n    return loaders.map(loader => Object.assign(\n      { options: { sourceMap: this.sourceMap } },\n      typeof loader === 'string' ? { loader } : loader\n    ))\n  }\n\n  styleResource(ext) {\n    const extResource = this.resources[ext]\n    // style-resources-loader\n    // https://github.com/yenshih/style-resources-loader\n    if (extResource) {\n      const patterns = Array.isArray(extResource)\n        ? extResource\n        : [extResource]\n\n      return {\n        loader: 'style-resources-loader',\n        options: Object.assign(\n          { patterns },\n          this.resources.options || {}\n        )\n      }\n    }\n  }\n\n  postcss() {\n    // postcss-loader\n    // https://github.com/postcss/postcss-loader\n    if (this.postcssConfig) {\n      const config = this.postcssConfig.config()\n      if (config) {\n        return {\n          loader: 'postcss-loader',\n          options: Object.assign({ sourceMap: this.sourceMap }, config)\n        }\n      }\n    }\n  }\n\n  css(importLoaders, options) {\n    // css-loader\n    // https://github.com/webpack-contrib/css-loader\n    const cssLoaderAlias = {\n      [`/${this.assetsDir}`]: path.join(this.srcDir, this.assetsDir),\n      [`/${this.staticDir}`]: path.join(this.srcDir, this.staticDir)\n    }\n\n    return {\n      loader: (this.isServer && this.extractCSS) ? 'css-loader/locals' : 'css-loader',\n      options: Object.assign({\n        sourceMap: this.sourceMap,\n        minimize: !this.dev,\n        importLoaders: importLoaders,\n        alias: cssLoaderAlias\n      }, options)\n    }\n  }\n\n  extract() {\n    if (this.extractCSS && !this.isServer) {\n      return MiniCssExtractPlugin.loader\n    }\n  }\n\n  vueStyle() {\n    // https://github.com/vuejs/vue-style-loader\n    return {\n      loader: 'vue-style-loader',\n      options: { sourceMap: this.sourceMap }\n    }\n  }\n\n  apply(ext, loaders = []) {\n    const customLoaders = [].concat(\n      this.postcss(loaders),\n      this.normalize(loaders),\n      this.styleResource(ext)\n    ).filter(Boolean)\n\n    const styleLoader = this.extract() || this.vueStyle()\n\n    return [\n      // This matches <style module>\n      {\n        resourceQuery: /module/,\n        use: [].concat(\n          styleLoader,\n          this.css(customLoaders.length, {\n            modules: true,\n            localIdentName: '[local]_[hash:base64:5]'\n          }),\n          customLoaders\n        )\n      },\n      // This matches plain <style> or <style scoped>\n      {\n        use: [].concat(\n          styleLoader,\n          this.css(customLoaders.length),\n          customLoaders\n        )\n      }\n    ]\n  }\n}\n","export default class WarnFixPlugin {\n  apply(compiler) /* istanbul ignore next */ {\n    compiler.hooks.done.tap('warnfix-plugin', stats => {\n      stats.compilation.warnings = stats.compilation.warnings.filter(warn => {\n        if (\n          warn.name === 'ModuleDependencyWarning' &&\n          warn.message.includes(`export 'default'`) &&\n          warn.message.includes('nuxt_plugin_')\n        ) {\n          return false\n        }\n        return true\n      })\n    })\n  }\n}\n","\nexport default class StatsPlugin {\n  constructor(statsOptions) {\n    this.statsOptions = statsOptions\n  }\n\n  apply(compiler) {\n    compiler.hooks.done.tap('stats-plugin', stats => {\n      process.stdout.write(\n        '\\n' +\n          stats.toString(this.statsOptions) +\n          '\\n'\n      )\n    })\n  }\n}\n","import path from 'path'\n\nimport TimeFixPlugin from 'time-fix-plugin'\nimport _ from 'lodash'\nimport VueLoader from 'vue-loader'\nimport MiniCssExtractPlugin from 'mini-css-extract-plugin'\nimport WebpackBar from 'webpackbar'\n\nimport { isUrl, urlJoin } from '../../common/utils'\nimport StyleLoader from './utils/style-loader'\nimport WarnFixPlugin from './plugins/warnfix'\nimport StatsPlugin from './plugins/stats'\n\nexport default class WebpackBaseConfig {\n  constructor(builder, options) {\n    this.name = options.name\n    this.isServer = options.isServer\n    this.builder = builder\n    this.nuxt = this.builder.nuxt\n    this.isStatic = builder.isStatic\n    this.options = builder.options\n    this.spinner = builder.spinner\n  }\n\n  getBabelOptions() {\n    const options = _.clone(this.options.build.babel)\n\n    if (typeof options.presets === 'function') {\n      options.presets = options.presets({ isServer: this.isServer })\n    }\n\n    if (!options.babelrc && !options.presets) {\n      options.presets = [\n        [\n          require.resolve('babel-preset-vue-app'),\n          {\n            targets: this.isServer ? { node: 'current' } : { ie: 9, uglify: true }\n          }\n        ]\n      ]\n    }\n\n    return options\n  }\n\n  getFileName(name) {\n    let fileName = this.options.build.filenames[name]\n\n    // Don't use hashes when watching\n    // https://github.com/webpack/webpack/issues/1914#issuecomment-174171709\n    if (this.options.dev) {\n      fileName = fileName.replace(/\\[(chunkhash|contenthash|hash)\\]\\./g, '')\n    }\n\n    // Don't use [name] for production assets\n    if (!this.options.dev && this.options.build.optimization.splitChunks.name !== true) {\n      fileName = fileName.replace(/\\[name\\]\\./g, '')\n    }\n\n    return fileName\n  }\n\n  env() {\n    const env = {\n      'process.mode': JSON.stringify(this.options.mode),\n      'process.static': this.isStatic\n    }\n    _.each(this.options.env, (value, key) => {\n      env['process.env.' + key] =\n        ['boolean', 'number'].indexOf(typeof value) !== -1\n          ? value\n          : JSON.stringify(value)\n    })\n    return env\n  }\n\n  output() {\n    return {\n      path: path.resolve(this.options.buildDir, 'dist'),\n      filename: this.getFileName('app'),\n      chunkFilename: this.getFileName('chunk'),\n      publicPath: isUrl(this.options.build.publicPath)\n        ? this.options.build.publicPath\n        : urlJoin(this.options.router.base, this.options.build.publicPath)\n    }\n  }\n\n  alias() {\n    return {\n      '~': path.join(this.options.srcDir),\n      '~~': path.join(this.options.rootDir),\n      '@': path.join(this.options.srcDir),\n      '@@': path.join(this.options.rootDir),\n      [this.options.dir.assets]: path.join(\n        this.options.srcDir,\n        this.options.dir.assets\n      ),\n      [this.options.dir.static]: path.join(\n        this.options.srcDir,\n        this.options.dir.static\n      )\n    }\n  }\n\n  rules() {\n    const styleLoader = new StyleLoader(\n      this.options,\n      this.builder.nuxt,\n      { isServer: this.isServer }\n    )\n\n    const perfLoader = this.builder.perfLoader\n\n    return [\n      {\n        test: /\\.vue$/,\n        loader: 'vue-loader',\n        options: Object.assign({\n          productionMode: !this.options.dev,\n          transformAssetUrls: {\n            video: 'src',\n            source: 'src',\n            object: 'src',\n            embed: 'src'\n          }\n        }, this.options.build.vueLoader)\n      },\n      {\n        test: /\\.pug$/,\n        oneOf: [\n          {\n            resourceQuery: /^\\?vue/,\n            use: ['pug-plain-loader']\n          },\n          {\n            use: ['raw-loader', 'pug-plain-loader']\n          }\n        ]\n      },\n      {\n        test: /\\.jsx?$/,\n        exclude: file => {\n          // not exclude files outside node_modules\n          if (/node_modules/.test(file)) {\n            for (let pkg of this.options.build.transpile) {\n              // item in transpile can be string or regex object\n              if (new RegExp(pkg).test(file)) {\n                return false\n              }\n            }\n            return true\n          }\n        },\n        use: perfLoader.pool('js', {\n          loader: 'babel-loader',\n          options: this.getBabelOptions()\n        })\n      },\n      {\n        test: /\\.css$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('css'))\n      },\n      {\n        test: /\\.less$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('less', 'less-loader'))\n      },\n      {\n        test: /\\.sass$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('sass', {\n          loader: 'sass-loader',\n          options: { indentedSyntax: true }\n        }))\n      },\n      {\n        test: /\\.scss$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('scss', 'sass-loader'))\n      },\n      {\n        test: /\\.styl(us)?$/,\n        oneOf: perfLoader.poolOneOf('css', styleLoader.apply('stylus', 'stylus-loader'))\n      },\n      {\n        test: /\\.(png|jpe?g|gif|svg)$/,\n        use: perfLoader.pool('assets', {\n          loader: 'url-loader',\n          options: {\n            limit: 1000, // 1KO\n            name: 'img/[name].[hash:7].[ext]'\n          }\n        })\n      },\n      {\n        test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/,\n        use: perfLoader.pool('assets', {\n          loader: 'url-loader',\n          options: {\n            limit: 1000, // 1 KO\n            name: 'fonts/[name].[hash:7].[ext]'\n          }\n        })\n      },\n      {\n        test: /\\.(webm|mp4)$/,\n        use: perfLoader.pool('assets', {\n          loader: 'file-loader',\n          options: {\n            name: 'videos/[name].[hash:7].[ext]'\n          }\n        })\n      }\n    ]\n  }\n\n  plugins() {\n    const plugins = [ new VueLoader.VueLoaderPlugin() ]\n\n    Array.prototype.push.apply(plugins, this.options.build.plugins || [])\n\n    // Add timefix-plugin before others plugins\n    if (this.options.dev) {\n      plugins.unshift(new TimeFixPlugin())\n    }\n\n    // Hide warnings about plugins without a default export (#1179)\n    plugins.push(new WarnFixPlugin())\n\n    // Build progress indicator\n    plugins.push(new WebpackBar({\n      profile: this.options.build.profile,\n      name: this.isServer ? 'server' : 'client',\n      color: this.isServer ? 'orange' : 'green',\n      compiledIn: false,\n      done: (states) => {\n        if (this.options.dev) {\n          const hasErrors = Object.values(states).some(state => state.stats.hasErrors())\n\n          if (!hasErrors) {\n            this.nuxt.showReady()\n          }\n        }\n      }\n    }))\n\n    // Add stats plugin\n    if (!this.options.dev && this.options.build.stats) {\n      plugins.push(new StatsPlugin(this.options.build.stats))\n    }\n\n    // CSS extraction\n    // MiniCssExtractPlugin does not currently supports SSR\n    // https://github.com/webpack-contrib/mini-css-extract-plugin/issues/48\n    // So we use css-loader/locals as a fallback (utils/style-loader)\n    if (this.options.build.extractCSS && !this.isServer) {\n      plugins.push(new MiniCssExtractPlugin(Object.assign({\n        filename: this.getFileName('css'),\n        chunkFilename: this.getFileName('css')\n      }, this.options.build.extractCSS)))\n    }\n\n    return plugins\n  }\n\n  config() {\n    // Prioritize nested node_modules in webpack search path (#2558)\n    const webpackModulesDir = ['node_modules'].concat(this.options.modulesDir)\n    const config = {\n      name: this.name,\n      mode: this.options.dev ? 'development' : 'production',\n      optimization: {},\n      output: this.output(),\n      performance: {\n        maxEntrypointSize: 1000 * 1024,\n        hints: this.options.dev ? false : 'warning'\n      },\n      resolve: {\n        extensions: ['.wasm', '.mjs', '.js', '.json', '.vue', '.jsx'],\n        alias: this.alias(),\n        modules: webpackModulesDir\n      },\n      resolveLoader: {\n        modules: webpackModulesDir\n      },\n      module: {\n        noParse: /es6-promise\\.js$/, // Avoid webpack shimming process\n        rules: this.rules()\n      },\n      plugins: this.plugins()\n    }\n\n    // Clone deep avoid leaking config between Client and Server\n    return _.cloneDeep(config)\n  }\n}\n","import path from 'path'\n\nimport webpack from 'webpack'\nimport HTMLPlugin from 'html-webpack-plugin'\nimport BundleAnalyzer from 'webpack-bundle-analyzer'\nimport UglifyJsWebpackPlugin from 'uglifyjs-webpack-plugin'\nimport FriendlyErrorsWebpackPlugin from '@nuxtjs/friendly-errors-webpack-plugin'\n\nimport VueSSRClientPlugin from './plugins/vue/client'\nimport WebpackBaseConfig from './base'\n\nexport default class WebpackClientConfig extends WebpackBaseConfig {\n  constructor(builder) {\n    super(builder, { name: 'client', isServer: false })\n  }\n\n  env() {\n    return Object.assign(super.env(), {\n      'process.env.VUE_ENV': JSON.stringify('client'),\n      'process.browser': true,\n      'process.client': true,\n      'process.server': false\n    })\n  }\n\n  plugins() {\n    const plugins = super.plugins()\n\n    // Generate output HTML for SSR\n    if (this.options.build.ssr) {\n      plugins.push(\n        new HTMLPlugin({\n          filename: 'index.ssr.html',\n          template: this.options.appTemplatePath,\n          minify: true,\n          inject: false // Resources will be injected using bundleRenderer\n        })\n      )\n    }\n\n    plugins.push(\n      new HTMLPlugin({\n        filename: 'index.spa.html',\n        template: this.options.appTemplatePath,\n        minify: true,\n        inject: true,\n        chunksSortMode: 'dependency'\n      }),\n      new VueSSRClientPlugin({\n        filename: 'vue-ssr-client-manifest.json'\n      }),\n      new webpack.DefinePlugin(this.env())\n    )\n\n    if (this.options.dev) {\n      // TODO: webpackHotUpdate is not defined: https://github.com/webpack/webpack/issues/6693\n      plugins.push(new webpack.HotModuleReplacementPlugin())\n    }\n\n    // Chunks size limit\n    // https://webpack.js.org/plugins/aggressive-splitting-plugin/\n    if (!this.options.dev && this.options.build.maxChunkSize) {\n      plugins.push(\n        new webpack.optimize.AggressiveSplittingPlugin({\n          minSize: this.options.build.maxChunkSize,\n          maxSize: this.options.build.maxChunkSize\n        })\n      )\n    }\n\n    // Webpack Bundle Analyzer\n    // https://github.com/webpack-contrib/webpack-bundle-analyzer\n    if (!this.options.dev && this.options.build.analyze) {\n      const statsDir = path.resolve(this.options.buildDir, 'stats')\n\n      plugins.push(new BundleAnalyzer.BundleAnalyzerPlugin(Object.assign({\n        analyzerMode: 'static',\n        defaultSizes: 'gzip',\n        generateStatsFile: true,\n        openAnalyzer: !(this.options.ci || this.options.test),\n        reportFilename: path.resolve(statsDir, 'client.html'),\n        statsFilename: path.resolve(statsDir, 'client.json')\n      }, this.options.build.analyze)))\n    }\n\n    return plugins\n  }\n\n  config() {\n    let config = super.config()\n\n    // Entry points\n    config.entry = path.resolve(this.options.buildDir, 'client.js')\n\n    // -- Optimization --\n    config.optimization = this.options.build.optimization\n\n    // Small, known and common modules which are usually used project-wise\n    // Sum of them may not be more than 244 KiB\n    if (\n      this.options.build.splitChunks.commons === true &&\n      config.optimization.splitChunks.cacheGroups.commons === undefined\n    ) {\n      config.optimization.splitChunks.cacheGroups.commons = {\n        test: /node_modules[\\\\/](vue|vue-loader|vue-router|vuex|vue-meta|core-js|babel-runtime|es6-promise|axios|webpack|setimmediate|timers-browserify|process|regenerator-runtime|cookie|js-cookie|is-buffer|dotprop|nuxt\\.js)[\\\\/]/,\n        chunks: 'all',\n        priority: 10,\n        name: 'commons'\n      }\n    }\n\n    // Make uglifyjs faster\n    if (!this.options.dev && !config.optimization.minimizer) {\n      // https://github.com/webpack-contrib/uglifyjs-webpack-plugin\n      config.optimization.minimizer = [\n        new UglifyJsWebpackPlugin({\n          parallel: true,\n          cache: this.options.build.cache,\n          sourceMap: false,\n          extractComments: {\n            filename: 'LICENSES'\n          },\n          uglifyOptions: {\n            output: {\n              comments: /^\\**!|@preserve|@license|@cc_on/\n            }\n          }\n        })\n      ]\n    }\n\n    // Add HMR support\n    if (this.options.dev) {\n      config.entry = [\n        // https://github.com/glenjamin/webpack-hot-middleware#config\n        `webpack-hot-middleware/client?name=client&reload=true&timeout=30000&path=${\n          this.options.router.base\n        }/__webpack_hmr`.replace(/\\/\\//g, '/'),\n        config.entry\n      ]\n    }\n\n    // Add friendly error plugin\n    if (this.options.dev) {\n      config.plugins.push(\n        new FriendlyErrorsWebpackPlugin({\n          clearConsole: true,\n          logLevel: 'WARNING'\n        })\n      )\n    }\n\n    // Extend config\n    if (typeof this.options.build.extend === 'function') {\n      const isDev = this.options.dev\n      const extendedConfig = this.options.build.extend.call(this.builder, config, {\n        isDev,\n        isClient: true\n      })\n\n      // Only overwrite config when something is returned for backwards compatibility\n      if (extendedConfig !== undefined) {\n        config = extendedConfig\n      }\n    }\n\n    return config\n  }\n}\n","import { validate, isJS, onEmit } from './util'\n\nexport default class VueSSRServerPlugin {\n  constructor(options = {}) {\n    this.options = Object.assign({\n      filename: 'vue-ssr-server-bundle.json'\n    }, options)\n  }\n\n  apply(compiler) {\n    validate(compiler)\n\n    onEmit(compiler, 'vue-server-plugin', (compilation, cb) => {\n      const stats = compilation.getStats().toJson()\n      const entryName = Object.keys(stats.entrypoints)[0]\n      const entryInfo = stats.entrypoints[entryName]\n\n      if (!entryInfo) {\n        // #5553\n        return cb()\n      }\n\n      const entryAssets = entryInfo.assets.filter(isJS)\n\n      if (entryAssets.length > 1) {\n        throw new Error(\n          `Server-side bundle should have one single entry file. ` +\n          `Avoid using CommonsChunkPlugin in the server config.`\n        )\n      }\n\n      const entry = entryAssets[0]\n      if (!entry || typeof entry !== 'string') {\n        throw new Error(\n          `Entry \"${entryName}\" not found. Did you specify the correct entry option?`\n        )\n      }\n\n      const bundle = {\n        entry,\n        files: {},\n        maps: {}\n      }\n\n      stats.assets.forEach(asset => {\n        if (asset.name.match(/\\.js$/)) {\n          bundle.files[asset.name] = compilation.assets[asset.name].source()\n        } else if (asset.name.match(/\\.js\\.map$/)) {\n          bundle.maps[asset.name.replace(/\\.map$/, '')] = JSON.parse(compilation.assets[asset.name].source())\n        }\n        // do not emit anything else for server\n        delete compilation.assets[asset.name]\n      })\n\n      const json = JSON.stringify(bundle, null, 2)\n      const filename = this.options.filename\n\n      compilation.assets[filename] = {\n        source: () => json,\n        size: () => json.length\n      }\n\n      cb()\n    })\n  }\n}\n","import path from 'path'\nimport fs from 'fs'\n\nimport webpack from 'webpack'\nimport nodeExternals from 'webpack-node-externals'\n\nimport BaseConfig from './base'\nimport VueSSRServerPlugin from './plugins/vue/server'\n\nexport default class WebpackServerConfig extends BaseConfig {\n  constructor(builder) {\n    super(builder, { name: 'server', isServer: true })\n  }\n\n  env() {\n    return Object.assign(super.env(), {\n      'process.env.VUE_ENV': JSON.stringify('server'),\n      'process.browser': false,\n      'process.client': false,\n      'process.server': true\n    })\n  }\n\n  plugins() {\n    const plugins = super.plugins()\n    plugins.push(\n      new VueSSRServerPlugin({\n        filename: 'server-bundle.json'\n      }),\n      new webpack.DefinePlugin(this.env())\n    )\n    return plugins\n  }\n\n  config() {\n    let config = super.config()\n\n    // Config devtool\n    config.devtool = 'cheap-source-map'\n\n    Object.assign(config, {\n      target: 'node',\n      node: false,\n      entry: path.resolve(this.options.buildDir, 'server.js'),\n      output: Object.assign({}, config.output, {\n        filename: 'server-bundle.js',\n        libraryTarget: 'commonjs2'\n      }),\n      performance: {\n        hints: false,\n        maxAssetSize: Infinity\n      },\n      externals: [],\n      optimization: {\n        splitChunks: false,\n        minimizer: []\n      }\n    })\n\n    // https://webpack.js.org/configuration/externals/#externals\n    // https://github.com/liady/webpack-node-externals\n    // https://vue-loader.vuejs.org/migrating.html#ssr-externals\n    this.options.modulesDir.forEach(dir => {\n      if (fs.existsSync(dir)) {\n        config.externals.push(\n          nodeExternals({\n            whitelist: [\n              /es6-promise|\\.(?!(?:js|json)$).{1,5}$/i,\n              /\\.css$/,\n              /\\?vue&type=style/\n            ],\n            modulesDir: dir\n          })\n        )\n      }\n    })\n\n    // Extend config\n    if (typeof this.options.build.extend === 'function') {\n      const isDev = this.options.dev\n      const extendedConfig = this.options.build.extend.call(this.builder, config, {\n        isDev,\n        isServer: true\n      })\n      // Only overwrite config when something is returned for backwards compatibility\n      if (extendedConfig !== undefined) {\n        config = extendedConfig\n      }\n    }\n\n    return config\n  }\n}\n","import path from 'path'\nimport fs from 'fs'\n\nimport pify from 'pify'\nimport _ from 'lodash'\nimport chokidar from 'chokidar'\nimport fsExtra from 'fs-extra'\nimport hash from 'hash-sum'\nimport webpack from 'webpack'\nimport serialize from 'serialize-javascript'\nimport MFS from 'memory-fs'\nimport webpackDevMiddleware from 'webpack-dev-middleware'\nimport webpackHotMiddleware from 'webpack-hot-middleware'\nimport Glob from 'glob'\nimport upath from 'upath'\nimport consola from 'consola'\n\nimport { r, wp, wChunk, createRoutes, parallel, sequence, relativeTo, waitFor } from '../common/utils'\nimport Options from '../common/options'\n\nimport PerfLoader from './webpack/utils/perf-loader'\nimport ClientWebpackConfig from './webpack/client'\nimport ServerWebpackConfig from './webpack/server'\n\nconst glob = pify(Glob)\n\nexport default class Builder {\n  constructor(nuxt) {\n    this.nuxt = nuxt\n    this.isStatic = false // Flag to know if the build is for a generated app\n    this.options = nuxt.options\n\n    // Fields that set on build\n    this.compilers = []\n    this.compilersWatching = []\n    this.webpackDevMiddleware = null\n    this.webpackHotMiddleware = null\n    this.filesWatcher = null\n    this.customFilesWatcher = null\n    this.perfLoader = null\n\n    // Helper to resolve build paths\n    this.relativeToBuild = (...args) =>\n      relativeTo(this.options.buildDir, ...args)\n\n    this._buildStatus = STATUS.INITIAL\n\n    // Stop watching on nuxt.close()\n    if (this.options.dev) {\n      this.nuxt.hook('close', () => this.unwatch())\n    }\n\n    // Initialize shared FS and Cache\n    if (this.options.dev) {\n      this.mfs = new MFS()\n    }\n\n    // if(!this.options.dev) {\n    // TODO: enable again when unsafe concern resolved.(common/options.js:42)\n    // this.nuxt.hook('build:done', () => this.generateConfig())\n    // }\n  }\n\n  get plugins() {\n    return _.uniqBy(\n      this.options.plugins.map((p, i) => {\n        if (typeof p === 'string') p = { src: p }\n        const pluginBaseName = path.basename(p.src, path.extname(p.src)).replace(\n          /[^a-zA-Z?\\d\\s:]/g,\n          ''\n        )\n        return {\n          src: this.nuxt.resolveAlias(p.src),\n          ssr: p.ssr !== false,\n          name: 'nuxt_plugin_' + pluginBaseName + '_' + hash(p.src)\n        }\n      }),\n      p => p.name\n    )\n  }\n\n  forGenerate() {\n    this.isStatic = true\n  }\n\n  async build() {\n    // Avoid calling build() method multiple times when dev:true\n    /* istanbul ignore if */\n    if (this._buildStatus === STATUS.BUILD_DONE && this.options.dev) {\n      return this\n    }\n    // If building\n    /* istanbul ignore if */\n    if (this._buildStatus === STATUS.BUILDING) {\n      await waitFor(1000)\n      return this.build()\n    }\n    this._buildStatus = STATUS.BUILDING\n\n    consola.info({\n      message: 'Building project',\n      badge: true,\n      clear: true\n    })\n\n    // Wait for nuxt ready\n    await this.nuxt.ready()\n\n    // Call before hook\n    await this.nuxt.callHook('build:before', this, this.options.build)\n\n    // Check if pages dir exists and warn if not\n    this._nuxtPages = typeof this.options.build.createRoutes !== 'function'\n    if (this._nuxtPages) {\n      if (!fsExtra.existsSync(path.join(this.options.srcDir, this.options.dir.pages))) {\n        let dir = this.options.srcDir\n        if (fsExtra.existsSync(path.join(this.options.srcDir, '..', this.options.dir.pages))) {\n          throw new Error(\n            `No \\`${this.options.dir.pages}\\` directory found in ${dir}. Did you mean to run \\`nuxt\\` in the parent (\\`../\\`) directory?`\n          )\n        } else {\n          this._defaultPage = true\n        }\n      }\n    }\n\n    consola.success('Builder initialized')\n\n    consola.debug(`App root: ${this.options.srcDir}`)\n\n    // Create .nuxt/, .nuxt/components and .nuxt/dist folders\n    await fsExtra.remove(r(this.options.buildDir))\n    await fsExtra.mkdirp(r(this.options.buildDir, 'components'))\n    if (!this.options.dev) {\n      await fsExtra.mkdirp(r(this.options.buildDir, 'dist'))\n    }\n\n    // Generate routes and interpret the template files\n    await this.generateRoutesAndFiles()\n\n    // Start webpack build\n    await this.webpackBuild()\n\n    // Flag to set that building is done\n    this._buildStatus = STATUS.BUILD_DONE\n\n    // Call done hook\n    await this.nuxt.callHook('build:done', this)\n\n    return this\n  }\n\n  async generateRoutesAndFiles() {\n    consola.debug(`Generating nuxt files`)\n\n    // -- Templates --\n    let templatesFiles = [\n      'App.js',\n      'client.js',\n      'index.js',\n      'middleware.js',\n      'router.js',\n      'server.js',\n      'utils.js',\n      'empty.js',\n      'components/nuxt-error.vue',\n      'components/nuxt-loading.vue',\n      'components/nuxt-child.js',\n      'components/nuxt-link.js',\n      'components/nuxt.js',\n      'components/no-ssr.js',\n      'views/app.template.html',\n      'views/error.html'\n    ]\n    const templateVars = {\n      options: this.options,\n      extensions: this.options.extensions\n        .map(ext => ext.replace(/^\\./, ''))\n        .join('|'),\n      messages: this.options.messages,\n      splitChunks: this.options.build.splitChunks,\n      uniqBy: _.uniqBy,\n      isDev: this.options.dev,\n      debug: this.options.debug,\n      mode: this.options.mode,\n      router: this.options.router,\n      env: this.options.env,\n      head: this.options.head,\n      middleware: fsExtra.existsSync(path.join(this.options.srcDir, this.options.dir.middleware)),\n      store: this.options.store,\n      css: this.options.css,\n      plugins: this.plugins,\n      appPath: './App.js',\n      ignorePrefix: this.options.ignorePrefix,\n      layouts: Object.assign({}, this.options.layouts),\n      loading:\n        typeof this.options.loading === 'string'\n          ? this.relativeToBuild(this.options.srcDir, this.options.loading)\n          : this.options.loading,\n      transition: this.options.transition,\n      layoutTransition: this.options.layoutTransition,\n      dir: this.options.dir,\n      components: {\n        ErrorPage: this.options.ErrorPage\n          ? this.relativeToBuild(this.options.ErrorPage)\n          : null\n      }\n    }\n\n    // -- Layouts --\n    if (fsExtra.existsSync(path.resolve(this.options.srcDir, this.options.dir.layouts))) {\n      const layoutsFiles = await glob(`${this.options.dir.layouts}/**/*.{vue,js}`, {\n        cwd: this.options.srcDir,\n        ignore: this.options.ignore\n      })\n      let hasErrorLayout = false\n      layoutsFiles.forEach(file => {\n        let name = file\n          .split('/')\n          .slice(1)\n          .join('/')\n          .replace(/\\.(vue|js)$/, '')\n        if (name === 'error') {\n          hasErrorLayout = true\n          return\n        }\n        if (!templateVars.layouts[name] || /\\.vue$/.test(file)) {\n          templateVars.layouts[name] = this.relativeToBuild(\n            this.options.srcDir,\n            file\n          )\n        }\n      })\n      if (!templateVars.components.ErrorPage && hasErrorLayout) {\n        templateVars.components.ErrorPage = this.relativeToBuild(\n          this.options.srcDir,\n          `${this.options.dir.layouts}/error.vue`\n        )\n      }\n    }\n    // If no default layout, create its folder and add the default folder\n    if (!templateVars.layouts.default) {\n      await fsExtra.mkdirp(r(this.options.buildDir, 'layouts'))\n      templatesFiles.push('layouts/default.vue')\n      templateVars.layouts.default = './layouts/default.vue'\n    }\n\n    // -- Routes --\n    consola.debug('Generating routes...')\n\n    if (this._defaultPage) {\n      templateVars.router.routes = createRoutes(\n        ['index.vue'],\n        this.options.nuxtAppDir + '/pages'\n      )\n    } else if (this._nuxtPages) { // If user defined a custom method to create routes\n      // Use nuxt.js createRoutes bases on pages/\n      const files = {}\n      ;(await glob(`${this.options.dir.pages}/**/*.{vue,js}`, {\n        cwd: this.options.srcDir,\n        ignore: this.options.ignore\n      })).forEach(f => {\n        const key = f.replace(/\\.(js|vue)$/, '')\n        if (/\\.vue$/.test(f) || !files[key]) {\n          files[key] = f.replace(/(['|\"])/g, '\\\\$1')\n        }\n      })\n      templateVars.router.routes = createRoutes(\n        Object.values(files),\n        this.options.srcDir,\n        this.options.dir.pages\n      )\n    } else {\n      templateVars.router.routes = this.options.build.createRoutes(\n        this.options.srcDir\n      )\n    }\n\n    await this.nuxt.callHook(\n      'build:extendRoutes',\n      templateVars.router.routes,\n      r\n    )\n\n    // router.extendRoutes method\n    if (typeof this.options.router.extendRoutes === 'function') {\n      // let the user extend the routes\n      const extendedRoutes = this.options.router.extendRoutes(\n        templateVars.router.routes,\n        r\n      )\n      // Only overwrite routes when something is returned for backwards compatibility\n      if (extendedRoutes !== undefined) {\n        templateVars.router.routes = extendedRoutes\n      }\n    }\n\n    // Make routes accessible for other modules and webpack configs\n    this.routes = templateVars.router.routes\n\n    // -- Store --\n    // Add store if needed\n    if (this.options.store) {\n      templatesFiles.push('store.js')\n    }\n\n    // Resolve template files\n    const customTemplateFiles = this.options.build.templates.map(\n      t => t.dst || path.basename(t.src || t)\n    )\n\n    templatesFiles = templatesFiles\n      .map(file => {\n        // Skip if custom file was already provided in build.templates[]\n        if (customTemplateFiles.indexOf(file) !== -1) {\n          return\n        }\n        // Allow override templates using a file with same name in ${srcDir}/app\n        const customPath = r(this.options.srcDir, 'app', file)\n        const customFileExists = fsExtra.existsSync(customPath)\n\n        return {\n          src: customFileExists ? customPath : r(this.options.nuxtAppDir, file),\n          dst: file,\n          custom: customFileExists\n        }\n      })\n      .filter(i => !!i)\n\n    // -- Custom templates --\n    // Add custom template files\n    templatesFiles = templatesFiles.concat(\n      this.options.build.templates.map(t => {\n        return Object.assign(\n          {\n            src: r(this.options.srcDir, t.src || t),\n            dst: t.dst || path.basename(t.src || t),\n            custom: true\n          },\n          t\n        )\n      })\n    )\n\n    // -- Loading indicator --\n    if (this.options.loadingIndicator.name) {\n      const indicatorPath1 = path.resolve(\n        this.options.nuxtAppDir,\n        'views/loading',\n        this.options.loadingIndicator.name + '.html'\n      )\n      const indicatorPath2 = this.nuxt.resolveAlias(\n        this.options.loadingIndicator.name\n      )\n      const indicatorPath = fsExtra.existsSync(indicatorPath1)\n        ? indicatorPath1\n        : fsExtra.existsSync(indicatorPath2) ? indicatorPath2 : null\n      if (indicatorPath) {\n        templatesFiles.push({\n          src: indicatorPath,\n          dst: 'loading.html',\n          options: this.options.loadingIndicator\n        })\n      } else {\n        /* istanbul ignore next */\n        // eslint-disable-next-line no-console\n        console.error(\n          `Could not fetch loading indicator: ${\n            this.options.loadingIndicator.name\n          }`\n        )\n      }\n    }\n\n    await this.nuxt.callHook('build:templates', {\n      templatesFiles,\n      templateVars,\n      resolve: r\n    })\n\n    // Interpret and move template files to .nuxt/\n    await Promise.all(\n      templatesFiles.map(async ({ src, dst, options, custom }) => {\n        // Add template to watchers\n        this.options.build.watch.push(src)\n        // Render template to dst\n        const fileContent = await fsExtra.readFile(src, 'utf8')\n        let content\n        try {\n          const template = _.template(fileContent, {\n            imports: {\n              serialize,\n              hash,\n              r,\n              wp,\n              wChunk,\n              resolvePath: this.nuxt.resolvePath.bind(this.nuxt),\n              resolveAlias: this.nuxt.resolveAlias.bind(this.nuxt),\n              relativeToBuild: this.relativeToBuild\n            }\n          })\n          content = template(\n            Object.assign({}, templateVars, {\n              options: options || {},\n              custom,\n              src,\n              dst\n            })\n          )\n        } catch (err) {\n          /* istanbul ignore next */\n          throw new Error(`Could not compile template ${src}: ${err.message}`)\n        }\n        const _path = r(this.options.buildDir, dst)\n        // Ensure parent dir exits\n        await fsExtra.mkdirp(path.dirname(_path))\n        // Write file\n        await fsExtra.writeFile(_path, content, 'utf8')\n      })\n    )\n\n    consola.success('Nuxt files generated')\n  }\n\n  async webpackBuild() {\n    this.perfLoader = new PerfLoader(this.options)\n\n    const compilersOptions = []\n\n    // Client\n    const clientConfig = new ClientWebpackConfig(this).config()\n    compilersOptions.push(clientConfig)\n\n    // Server\n    let serverConfig = null\n    if (this.options.build.ssr) {\n      serverConfig = new ServerWebpackConfig(this).config()\n      compilersOptions.push(serverConfig)\n    }\n\n    // Alias plugins to their real path\n    this.plugins.forEach(p => {\n      const src = this.relativeToBuild(p.src)\n\n      // Client config\n      if (!clientConfig.resolve.alias[p.name]) {\n        clientConfig.resolve.alias[p.name] = src\n      }\n\n      // Server config\n      if (serverConfig && !serverConfig.resolve.alias[p.name]) {\n        // Alias to noop for ssr:false plugins\n        serverConfig.resolve.alias[p.name] = p.ssr ? src : './empty.js'\n      }\n    })\n\n    // Configure compilers\n    this.compilers = compilersOptions.map(compilersOption => {\n      const compiler = webpack(compilersOption)\n\n      // In dev, write files in memory FS\n      if (this.options.dev) {\n        compiler.outputFileSystem = this.mfs\n      }\n\n      return compiler\n    })\n\n    // Warmup perfLoader before build\n    if (this.options.build.parallel) {\n      consola.info('Warming up worker pools')\n      this.perfLoader.warmupAll()\n      consola.success('Worker pools ready')\n    }\n\n    // Start Builds\n    const runner = this.options.dev ? parallel : sequence\n\n    await runner(this.compilers, compiler => {\n      return this.webpackCompile(compiler)\n    })\n  }\n\n  webpackCompile(compiler) {\n    return new Promise(async (resolve, reject) => {\n      const name = compiler.options.name\n\n      await this.nuxt.callHook('build:compile', { name, compiler })\n\n      // Load renderer resources after build\n      compiler.hooks.done.tap('load-resources', async stats => {\n        await this.nuxt.callHook('build:compiled', {\n          name,\n          compiler,\n          stats\n        })\n\n        // Reload renderer if available\n        this.nuxt.renderer.loadResources(this.mfs || fs)\n\n        // Resolve on next tick\n        process.nextTick(resolve)\n      })\n\n      if (this.options.dev) {\n        // --- Dev Build ---\n        // Client Build, watch is started by dev-middleware\n        if (compiler.options.name === 'client') {\n          return this.webpackDev(compiler)\n        }\n        // Server, build and watch for changes\n        this.compilersWatching.push(\n          compiler.watch(this.options.watchers.webpack, err => {\n            /* istanbul ignore if */\n            if (err) return reject(err)\n          })\n        )\n      } else {\n        // --- Production Build ---\n        compiler.run((err, stats) => {\n          /* istanbul ignore next */\n          if (err) {\n            return reject(err)\n          } else if (stats.hasErrors()) {\n            if (this.options.test) {\n              err = stats.toString(this.options.build.stats)\n            }\n\n            return reject(err)\n          }\n\n          resolve()\n        })\n      }\n    })\n  }\n\n  webpackDev(compiler) {\n    consola.debug('Adding webpack middleware...')\n\n    // Create webpack dev middleware\n    this.webpackDevMiddleware = pify(\n      webpackDevMiddleware(\n        compiler,\n        Object.assign(\n          {\n            publicPath: this.options.build.publicPath,\n            stats: false,\n            logLevel: 'silent',\n            watchOptions: this.options.watchers.webpack\n          },\n          this.options.build.devMiddleware\n        )\n      )\n    )\n\n    this.webpackDevMiddleware.close = pify(this.webpackDevMiddleware.close)\n\n    this.webpackHotMiddleware = pify(\n      webpackHotMiddleware(\n        compiler,\n        Object.assign(\n          {\n            log: false,\n            heartbeat: 10000\n          },\n          this.options.build.hotMiddleware\n        )\n      )\n    )\n\n    // Inject to renderer instance\n    if (this.nuxt.renderer) {\n      this.nuxt.renderer.webpackDevMiddleware = this.webpackDevMiddleware\n      this.nuxt.renderer.webpackHotMiddleware = this.webpackHotMiddleware\n    }\n\n    // Start watching files\n    this.watchFiles()\n  }\n\n  watchFiles() {\n    const src = this.options.srcDir\n    let patterns = [\n      r(src, this.options.dir.layouts),\n      r(src, this.options.dir.store),\n      r(src, this.options.dir.middleware),\n      r(src, `${this.options.dir.layouts}/*.{vue,js}`),\n      r(src, `${this.options.dir.layouts}/**/*.{vue,js}`)\n    ]\n    if (this._nuxtPages) {\n      patterns.push(\n        r(src, this.options.dir.pages),\n        r(src, `${this.options.dir.pages}/*.{vue,js}`),\n        r(src, `${this.options.dir.pages}/**/*.{vue,js}`)\n      )\n    }\n    patterns = _.map(patterns, p => upath.normalizeSafe(p))\n\n    const options = Object.assign({}, this.options.watchers.chokidar, {\n      ignoreInitial: true\n    })\n    /* istanbul ignore next */\n    const refreshFiles = _.debounce(() => this.generateRoutesAndFiles(), 200)\n\n    // Watch for src Files\n    this.filesWatcher = chokidar\n      .watch(patterns, options)\n      .on('add', refreshFiles)\n      .on('unlink', refreshFiles)\n\n    // Watch for custom provided files\n    let customPatterns = _.concat(\n      this.options.build.watch,\n      ..._.values(_.omit(this.options.build.styleResources, ['options']))\n    )\n    customPatterns = _.map(_.uniq(customPatterns), p =>\n      upath.normalizeSafe(p)\n    )\n    this.customFilesWatcher = chokidar\n      .watch(customPatterns, options)\n      .on('change', refreshFiles)\n  }\n\n  async unwatch() {\n    if (this.filesWatcher) {\n      this.filesWatcher.close()\n    }\n\n    if (this.customFilesWatcher) {\n      this.customFilesWatcher.close()\n    }\n\n    this.compilersWatching.forEach(watching => watching.close())\n\n    // Stop webpack middleware\n    if (this.webpackDevMiddleware) {\n      await this.webpackDevMiddleware.close()\n    }\n  }\n\n  // TODO: remove ignore when generateConfig enabled again\n  async generateConfig() /* istanbul ignore next */ {\n    const config = path.resolve(this.options.buildDir, 'build.config.js')\n    const options = _.omit(this.options, Options.unsafeKeys)\n    await fsExtra.writeFile(\n      config,\n      `export default ${JSON.stringify(options, null, '  ')}`,\n      'utf8'\n    )\n  }\n}\n\nconst STATUS = {\n  INITIAL: 1,\n  BUILD_DONE: 2,\n  BUILDING: 3\n}\n","import path from 'path'\nimport _ from 'lodash'\nimport htmlMinifier from 'html-minifier'\nimport Chalk from 'chalk'\nimport fsExtra from 'fs-extra'\nimport consola from 'consola'\nimport { isUrl, promisifyRoute, waitFor, flatRoutes } from '../common/utils'\n\nexport default class Generator {\n  constructor(nuxt, builder) {\n    this.nuxt = nuxt\n    this.options = nuxt.options\n    this.builder = builder\n\n    // Set variables\n    this.staticRoutes = path.resolve(this.options.srcDir, this.options.dir.static)\n    this.srcBuiltPath = path.resolve(this.options.buildDir, 'dist')\n    this.distPath = path.resolve(this.options.rootDir, this.options.generate.dir)\n    this.distNuxtPath = path.join(\n      this.distPath,\n      isUrl(this.options.build.publicPath) ? '' : this.options.build.publicPath\n    )\n  }\n\n  async generate({ build = true, init = true } = {}) {\n    consola.debug('Initializing generator...')\n\n    await this.initiate({ build, init })\n\n    consola.debug('Preparing routes for generate...')\n\n    const routes = await this.initRoutes()\n\n    consola.info({\n      message: 'Generating pages',\n      badge: true,\n      clear: true\n    })\n\n    const errors = await this.generateRoutes(routes)\n\n    await this.afterGenerate()\n\n    // Done hook\n    await this.nuxt.callHook('generate:done', this, errors)\n\n    return { errors }\n  }\n\n  async initiate({ build = true, init = true } = {}) {\n    // Wait for nuxt be ready\n    await this.nuxt.ready()\n\n    // Call before hook\n    await this.nuxt.callHook('generate:before', this, this.options.generate)\n\n    if (build) {\n      // Add flag to set process.static\n      this.builder.forGenerate()\n\n      // Start build process\n      await this.builder.build()\n    }\n\n    // Initialize dist directory\n    if (init) {\n      await this.initDist()\n    }\n  }\n\n  async initRoutes(...args) {\n    // Resolve config.generate.routes promises before generating the routes\n    let generateRoutes = []\n    if (this.options.router.mode !== 'hash') {\n      try {\n        generateRoutes = await promisifyRoute(\n          this.options.generate.routes || [],\n          ...args\n        )\n      } catch (e) {\n        consola.error('Could not resolve routes')\n        throw e // eslint-disable-line no-unreachable\n      }\n    }\n    // Generate only index.html for router.mode = 'hash'\n    let routes =\n      this.options.router.mode === 'hash'\n        ? ['/']\n        : flatRoutes(this.options.router.routes)\n    routes = this.decorateWithPayloads(routes, generateRoutes)\n\n    // extendRoutes hook\n    await this.nuxt.callHook('generate:extendRoutes', routes)\n\n    return routes\n  }\n\n  async generateRoutes(routes) {\n    let errors = []\n\n    // Start generate process\n    while (routes.length) {\n      let n = 0\n      await Promise.all(\n        routes\n          .splice(0, this.options.generate.concurrency)\n          .map(async ({ route, payload }) => {\n            await waitFor(n++ * this.options.generate.interval)\n            await this.generateRoute({ route, payload, errors })\n          })\n      )\n    }\n\n    // Improve string representation for errors\n    errors.toString = () => this._formatErrors(errors)\n\n    return errors\n  }\n\n  _formatErrors(errors) {\n    return errors\n      .map(({ type, route, error }) => {\n        const isHandled = type === 'handled'\n        const bgColor = isHandled ? 'bgYellow' : 'bgRed'\n        const color = isHandled ? 'yellow' : 'red'\n\n        let line =\n          Chalk.black[bgColor](' GEN ERR ') + Chalk[color](` ${route}\\n\\n`)\n\n        if (isHandled) {\n          line += Chalk.grey(JSON.stringify(error, undefined, 2) + '\\n')\n        } else {\n          line += Chalk.grey(error.stack)\n        }\n\n        return line\n      })\n      .join('\\n')\n  }\n\n  async afterGenerate() {\n    let { fallback } = this.options.generate\n\n    // Disable SPA fallback if value isn't true or a string\n    if (fallback !== true && typeof fallback !== 'string') return\n\n    const fallbackPath = path.join(this.distPath, fallback)\n\n    // Prevent conflicts\n    if (fsExtra.existsSync(fallbackPath)) {\n      consola.warn(`SPA fallback was configured, but the configured path (${fallbackPath}) already exists.`)\n      return\n    }\n\n    // Render and write the SPA template to the fallback path\n    const { html } = await this.nuxt.renderRoute('/', { spa: true })\n    await fsExtra.writeFile(fallbackPath, html, 'utf8')\n  }\n\n  async initDist() {\n    // Clean destination folder\n    await fsExtra.remove(this.distPath)\n\n    await this.nuxt.callHook('generate:distRemoved', this)\n\n    // Copy static and built files\n    /* istanbul ignore if */\n    if (fsExtra.existsSync(this.staticRoutes)) {\n      await fsExtra.copy(this.staticRoutes, this.distPath)\n    }\n    await fsExtra.copy(this.srcBuiltPath, this.distNuxtPath)\n\n    // Add .nojekyll file to let Github Pages add the _nuxt/ folder\n    // https://help.github.com/articles/files-that-start-with-an-underscore-are-missing/\n    const nojekyllPath = path.resolve(this.distPath, '.nojekyll')\n    fsExtra.writeFile(nojekyllPath, '')\n\n    // Cleanup SSR related files\n    const extraFiles = [\n      'index.spa.html',\n      'index.ssr.html',\n      'server-bundle.json',\n      'vue-ssr-client-manifest.json'\n    ].map(file => path.resolve(this.distNuxtPath, file))\n\n    extraFiles.forEach(file => {\n      if (fsExtra.existsSync(file)) {\n        fsExtra.removeSync(file)\n      }\n    })\n\n    await this.nuxt.callHook('generate:distCopied', this)\n  }\n\n  decorateWithPayloads(routes, generateRoutes) {\n    let routeMap = {}\n    // Fill routeMap for known routes\n    routes.forEach(route => {\n      routeMap[route] = {\n        route,\n        payload: null\n      }\n    })\n    // Fill routeMap with given generate.routes\n    generateRoutes.forEach(route => {\n      // route is either a string or like { route : '/my_route/1', payload: {} }\n      const path = _.isString(route) ? route : route.route\n      routeMap[path] = {\n        route: path,\n        payload: route.payload || null\n      }\n    })\n    return _.values(routeMap)\n  }\n\n  async generateRoute({ route, payload = {}, errors = [] }) {\n    let html\n    const pageErrors = []\n\n    try {\n      const res = await this.nuxt.renderer.renderRoute(route, {\n        _generate: true,\n        payload\n      })\n      html = res.html\n      if (res.error) {\n        pageErrors.push({ type: 'handled', route, error: res.error })\n      }\n    } catch (err) {\n      /* istanbul ignore next */\n      pageErrors.push({ type: 'unhandled', route, error: err })\n      Array.prototype.push.apply(errors, pageErrors)\n\n      await this.nuxt.callHook('generate:routeFailed', {\n        route,\n        errors: pageErrors\n      })\n\n      return false\n    }\n\n    if (this.options.generate.minify) {\n      try {\n        html = htmlMinifier.minify(html, this.options.generate.minify)\n      } catch (err) /* istanbul ignore next */ {\n        const minifyErr = new Error(\n          `HTML minification failed. Make sure the route generates valid HTML. Failed HTML:\\n ${html}`\n        )\n        pageErrors.push({ type: 'unhandled', route, error: minifyErr })\n      }\n    }\n\n    let _path\n\n    if (this.options.generate.subFolders) {\n      _path = path.join(route, path.sep, 'index.html') // /about -> /about/index.html\n      _path = _path === '/404/index.html' ? '/404.html' : _path // /404 -> /404.html\n    } else {\n      _path = route.length > 1 ? path.join(path.sep, route + '.html') : path.join(path.sep, 'index.html')\n    }\n\n    // Call hook to let user update the path & html\n    const page = { route, path: _path, html }\n    await this.nuxt.callHook('generate:page', page)\n\n    page.path = path.join(this.distPath, page.path)\n\n    // Make sure the sub folders are created\n    await fsExtra.mkdirp(path.dirname(page.path))\n    await fsExtra.writeFile(page.path, page.html, 'utf8')\n\n    await this.nuxt.callHook('generate:routeCreated', {\n      route,\n      path: page.path,\n      errors: pageErrors\n    })\n\n    if (pageErrors.length) {\n      consola.error('Error generating ' + route)\n      Array.prototype.push.apply(errors, pageErrors)\n    } else {\n      consola.success('Generated ' + route)\n    }\n\n    return true\n  }\n}\n","import Builder from './builder'\nimport Generator from './generator'\n\nexport default {\n  Builder,\n  Generator\n}\n","import 'babel-polyfill'\n\nimport consola from 'consola'\n\nimport core from './core'\nimport builder from './builder'\nimport * as Utils from './common/utils'\n\nconsola.warn('You are using legacy build of Nuxt. Please consider upgrading your Node.js version to 8.x or later.')\n\nexport default Object.assign({ Utils }, core, builder)\n"],"names":["fn","finalFn","result","promiseFinally","encodeHtml","str","replace","getContext","req","res","waitFor","ms","Promise","setTimeout","resolve","timeout","msg","timerId","warpPromise","clearTimeout","timerPromise","reject","Error","race","urlJoin","slice","call","arguments","join","isUrl","url","indexOf","promisifyRoute","args","Array","isArray","length","err","routeParams","promise","then","sequence","tasks","reduce","task","parallel","all","map","chainFn","base","apply","baseResult","undefined","fnResult","prototype","isPureObject","o","isWindows","test","process","platform","wp","p","wChunk","reqSep","sysSep","_","escapeRegExp","path","sep","normalize","string","r","lastArg","last","relativeTo","dir","shift","loaders","split","concat","pop","_path","rp","relative","flatRoutes","router","routes","forEach","includes","children","push","cleanChildrenRoutes","isChild","start","routesIndex","route","name","s","names","paths","i","a","find","child","createRoutes","files","srcDir","pagesDir","keys","file","RegExp","component","parent","key","sanatizedKey","chunkName","sort","b","y","z","_a","_b","ModuleContainer","nuxt","options","requiredModules","callHook","modules","addModule","bind","vendor","template","JSON","stringify","src","srcPath","parse","fs","existsSync","dst","fileName","basename","hash","ext","templateObj","build","templates","addTemplate","plugins","unshift","buildDir","ssr","layouts","middleware","serverMiddleware","extend","extendRoutes","moduleOpts","requireOnce","handler","requireModule","esm","meta","nuxtDir","__dirname","Boolean","env","dev","argv","Options","from","_options","Object","assign","loading","_routerBaseSpecified","transition","layoutTransition","extensions","hasValue","v","rootDir","cwd","defaultsDeep","defaults","modulesDir","filter","appTemplatePath","publicPath","store","readdirSync","filename","loadingIndicator","color","manifest","theme_color","messages","debug","csp","render","cspDefaults","isObject","cssSourceMap","babel","cacheDirectory","ignore","ignorePrefix","modePreset","modes","mode","appear","generate","fallback","optimization","splitChunks","analyze","stats","warn","extractCSS","transpile","MetaRenderer","renderer","vueRenderer","createRenderer","cache","LRU","use","VueMeta","Vue","h","head","renderToString","vm","$meta","inject","get","getMeta","HTML_ATTRS","m","htmlAttrs","text","BODY_ATTRS","bodyAttrs","HEAD","title","link","style","script","noscript","BODY_SCRIPTS","body","resourceHints","resources","clientManifest","bundleRenderer","shouldPreload","shouldPrefetch","initial","async","getPreloadFiles","set","frame","sanitizeName","searchPath","pathDir","readFile","fullPath","catch","source","contents","isAbsolute","serverBundle","readSource","errorMiddleware","next","statusCode","message","error","sendResponse","content","type","statusMessage","setHeader","Buffer","byteLength","end","hasReqHeader","header","headers","toLowerCase","isJson","json","html","errorTemplate","youch","Youch","toJSON","toHTML","renderRoute","context","cspScriptSrcHashes","redirected","etag","generateETag","fresh","http2","shouldPush","asType","fileWithoutQuery","extension","pushAssets","allowedSources","policies","k","cspArr","cspStr","nuxtMiddleware","jsdom","Renderer","metaRenderer","webpackDevMiddleware","webpackHotMiddleware","app","connect","parseTemplate","setupMiddleware","loadResources","_fs","transform","rawKey","distPath","rawData","data","readFileSync","errorTemplatePath","loadingHTMLPath","loadingHTML","updated","isResourcesAvailable","noSSR","createBundleRenderer","$m","prefix","gzip","useMiddleware","compression","ssrResourceRegex","launchMiddleware","editor","serveStatic","static","staticMiddleware","distDir","opts","html_attrs","body_attrs","ssrTemplate","spaTemplate","isReady","spa","error_404","renderTemplate","serverRendered","renderResourceHints","serialize","hashAlgorithm","crypto","createHash","update","serializedSession","digest","renderScripts","renderStyles","require","window","scrollTo","jsdomErrHandler","virtualConsole","VirtualConsole","sendTo","consola","on","JSDOM","fromURL","document","innerHTML","nuxtExists","_onNuxtLoaded","removeListener","templateStr","resourceMap","resource","Nuxt","readyMessage","initialized","_hooks","hook","moduleContainer","renderAndGetWindow","module","_ready","ready","fatal","isPlainObject","hooks","addObjectHooks","hooksObj","clear","port","host","server","listen","exclusive","listenURL","chalk","underline","blue","destroy","substr","resolvedPath","Module","_resolveFilename","code","__path","resolveAlias","_resovledPath","resolvePath","default","callback","packageJSON","version","PerfLoader","warmup","workerPools","Infinity","js","css","poolName","_loaders","pool","oneOfRules","rule","console","red","tip","log","yellow","validate","compiler","target","output","libraryTarget","externals","onEmit","emit","tapAsync","plugin","isJS","isCSS","VueSSRClientPlugin","compilation","cb","getStats","toJson","allFiles","uniq","assets","initialFiles","entrypoints","asyncFiles","assetModules","fileToIndex","chunks","cid","chunk","c","id","identifier","some","PostcssConfig","postcss","postcssConfigPath","config","instance","e","configFromFile","cloneDeep","defaultConfig","loadPlugins","createResolver","StyleLoader","isServer","assetsDir","staticDir","styleResources","sourceMap","postcssConfig","loader","extResource","patterns","importLoaders","cssLoaderAlias","MiniCssExtractPlugin","customLoaders","styleResource","styleLoader","extract","vueStyle","WarnFixPlugin","done","tap","warnings","StatsPlugin","statsOptions","stdout","write","toString","WebpackBaseConfig","builder","isStatic","spinner","clone","presets","babelrc","node","ie","uglify","filenames","each","value","getFileName","perfLoader","vueLoader","pkg","getBabelOptions","poolOneOf","indentedSyntax","VueLoader","VueLoaderPlugin","TimeFixPlugin","WebpackBar","profile","states","hasErrors","values","state","showReady","webpackModulesDir","alias","rules","WebpackClientConfig","HTMLPlugin","webpack","DefinePlugin","HotModuleReplacementPlugin","maxChunkSize","optimize","AggressiveSplittingPlugin","statsDir","BundleAnalyzer","BundleAnalyzerPlugin","ci","entry","commons","cacheGroups","minimizer","UglifyJsWebpackPlugin","FriendlyErrorsWebpackPlugin","isDev","extendedConfig","VueSSRServerPlugin","entryName","entryInfo","entryAssets","bundle","asset","match","maps","WebpackServerConfig","devtool","nodeExternals","BaseConfig","glob","pify","Glob","Builder","compilers","compilersWatching","filesWatcher","customFilesWatcher","relativeToBuild","_buildStatus","STATUS","INITIAL","unwatch","mfs","MFS","BUILD_DONE","BUILDING","info","_nuxtPages","fsExtra","pages","_defaultPage","success","remove","mkdirp","generateRoutesAndFiles","webpackBuild","uniqBy","ErrorPage","templateVars","components","hasErrorLayout","nuxtAppDir","f","extendedRoutes","t","templatesFiles","customTemplateFiles","customPath","customFileExists","indicatorPath1","indicatorPath2","indicatorPath","custom","watch","fileContent","dirname","writeFile","ClientWebpackConfig","clientConfig","ServerWebpackConfig","serverConfig","compilersOptions","compilersOption","outputFileSystem","warmupAll","runner","webpackCompile","nextTick","webpackDev","watchers","run","devMiddleware","close","hotMiddleware","watchFiles","upath","normalizeSafe","chokidar","refreshFiles","debounce","customPatterns","omit","watching","unsafeKeys","pluginBaseName","extname","Generator","staticRoutes","srcBuiltPath","distNuxtPath","init","initiate","initRoutes","generateRoutes","afterGenerate","errors","forGenerate","initDist","decorateWithPayloads","splice","concurrency","payload","n","interval","generateRoute","_formatErrors","isHandled","bgColor","line","Chalk","black","grey","stack","fallbackPath","copy","nojekyllPath","removeSync","routeMap","isString","pageErrors","minify","htmlMinifier","minifyErr","subFolders","page","Utils","core"],"mappings":"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"}